<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Sakupinera" href="http://sakupinera.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Sakupinera" href="http://sakupinera.github.io/atom.xml"><link rel="alternate" type="application/json" title="Sakupinera" href="http://sakupinera.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="读书笔记,C++"><link rel="canonical" href="http://sakupinera.github.io/2023/01/10/cpp/cpp-primer/Chapter%2018%20Tools%20for%20Large%20Programs/"><title>C++ Primer - Chapter 18 Tools for Large Programs - Cpp-Primer - Cpp | Hanamai Sora = Sakupinera</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">C++ Primer - Chapter 18 Tools for Large Programs</h1><div class="meta"><span class="item" title="Created: 2023-01-10 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2023-01-10T00:00:00+08:00">2023-01-10</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>9.1k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>8 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Hanamai Sora</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipeuibk9fj20zk0m8ay2.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipewf5l51j20zk0m8b29.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipex2cdtbj20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipesx5fdwj20zk0m81kx.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipevgoki5j20zk0m84qp.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclwuom7cj20zk0m8dvn.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Cpp/" itemprop="item" rel="index" title="In Cpp"><span itemprop="name">Cpp</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Cpp/Cpp-Primer/" itemprop="item" rel="index" title="In Cpp-Primer"><span itemprop="name">Cpp-Primer</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="http://sakupinera.github.io/2023/01/10/cpp/cpp-primer/Chapter%2018%20Tools%20for%20Large%20Programs/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Sakupinera"><meta itemprop="description" content=", 保持你的决心！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sakupinera"></span><div class="body md" itemprop="articleBody"><h1 id="chapter-18-tools-for-large-programs"><a class="anchor" href="#chapter-18-tools-for-large-programs">#</a> Chapter 18 Tools for Large Programs</h1><p>大规模应用程序的特殊要求包括：</p><ul><li>在独立开发的子系统之间协同处理错误的能力。</li><li>使用各种库进行协同开发的能力。</li><li>对比较复杂的应用概念建模的能力。</li></ul><h2 id="exception-handling"><a class="anchor" href="#exception-handling">#</a> Exception Handling</h2><hr><h3 id="异常处理"><a class="anchor" href="#异常处理">#</a> 异常处理</h3><p><strong>异常处理</strong>（exception handling）机制允许程序中独立开发的部分能够在运行时就出现的问题进行通信并作出相应的处理。</p><h4 id="抛出异常"><a class="anchor" href="#抛出异常">#</a> 抛出异常</h4><p>在 C++ 语言中，我们通过<strong>抛出</strong>（throwing）一条表达式来<strong>引发</strong>（raised）一个异常。异常类型和当前的调用链决定了哪段<strong>处理代码</strong>（handler）将用来处理该异常。</p><p>程序的控制权从 <code>throw</code> 转移到 <code>catch</code> 模块。</p><p><strong>栈展开</strong>：当 <code>throw</code> 出现在一个 <code>try语句块</code> 时，检查该 <code>try语句块</code> 相关的 <code>catch</code> 字句，若有匹配则处理；若无匹配，则继续检查外层的 <code>try</code> 匹配的 <code>catch</code> 。</p><p>若一个异常没有被捕获，则它将终止当前的程序。</p><p>对象销毁：</p><ul><li>块退出后，它的局部对象将被销毁。</li><li>若异常发生在构造函数中，即使某个对象只构造了一部分，也要确保已构造的成员正确地被销毁。</li><li>将资源释放放在类的析构函数中，以保证资源能被正确释放。析构函数本身不会引发异常。</li></ul><h4 id="捕获异常"><a class="anchor" href="#捕获异常">#</a> 捕获异常</h4><p>若无需访问抛出的异常对象，则可以忽略捕获形参的名字。</p><p>通常，若 <code>catch</code> 接受的异常与某个继承体系有关，则最好将该 <code>catch</code> 的参数定义成引用类型。</p><p>搜索 <code>catch</code> 未必是最佳匹配，而是第一个匹配，因此，越细化的 <code>catch</code> 越应该放在 <code>catch</code> 列表前段。</p><p>重新抛出： <code>catch</code> 代码执行一条 <code>throw;</code> 将异常传递给另一个 <code>catch</code> 语句。</p><p>捕获所有异常： <code>catch(...)</code></p><h4 id="构造函数"><a class="anchor" href="#构造函数">#</a> 构造函数</h4><p>处理构造函数初始值异常的唯一方法是将构造函数协程函数 <code>try</code> 语句块。</p><p>示例：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Blob</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">Blob</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>initializer_list<span class="token operator">&lt;</span>T<span class="token operator">></span> il<span class="token punctuation">)</span> <span class="token keyword">try</span><span class="token operator">:</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">></span></span></span><span class="token punctuation">(</span>il<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">/* 函数体 */</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>bad_alloc <span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">handle_out_of_memory</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="noexcept异常说明"><a class="anchor" href="#noexcept异常说明">#</a> noexcept 异常说明</h4><p>使用 <code>noexcept</code> 说明指定某个函数不会抛出异常。</p><p>示例：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">recoup</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span> <span class="token comment">//C++11</span></pre></td></tr><tr><td data-num="2"></td><td><pre>coid <span class="token function">recoup</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 老版本</span></pre></td></tr></table></figure><h4 id="异常类层次"><a class="anchor" href="#异常类层次">#</a> 异常类层次</h4><p>标准 exception 层次：</p><ul><li>exception<ul><li>bad_cast</li><li>bad_alloc</li><li>runtime_error<ul><li>overflow_error</li><li>underflow_error</li><li>range_error</li></ul></li><li>logic_error<ul><li>domain_error</li><li>invalid_argument</li><li>out_of_range</li><li>length_error</li></ul></li></ul></li></ul><p>自定义异常类：</p><p>示例：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">out_of_stock</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">runtime_error</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">explicit</span> <span class="token function">out_of_stock</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    std<span class="token double-colon punctuation">::</span><span class="token function">runtime_error</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><hr><h3 id="exercise-181"><a class="anchor" href="#exercise-181">#</a> Exercise 18.1</h3><blockquote><p>在下列 <code>throw</code> 语句中异常对象的类型是什么？</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> range_error <span class="token function">r</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">throw</span> r<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> exception <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>r<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">throw</span> <span class="token operator">*</span>p<span class="token punctuation">;</span></pre></td></tr></table></figure><p>解：</p><ul><li>(a): <code>range_error</code></li><li>(b): <code>exception</code></li></ul><h3 id="exercise-182"><a class="anchor" href="#exercise-182">#</a> Exercise 18.2</h3><blockquote><p>当在指定的位置发生了异常时将出现什么情况？</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">exercise</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>b<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>e<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">v</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	ifstream <span class="token function">in</span><span class="token punctuation">(</span><span class="token string">"ints"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token comment">// 此处发生异常</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>解：</p><p>指针 <code>p</code> 指向的内容不会被释放，将造成内存泄漏。</p><h3 id="exercise-183"><a class="anchor" href="#exercise-183">#</a> Exercise 18.3</h3><blockquote><p>要想让上面的代码在发生异常时能正常工作，有两种解决方案。请描述这两种方法并实现它们。</p></blockquote><p>解：</p><p>方法一：不使用指针，使用对象：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">intArray</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">intArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">explicit</span>    <span class="token function">intArray</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>size_t s<span class="token punctuation">)</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token operator">~</span><span class="token function">intArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// data meber</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>intArray <span class="token function">p</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>方法二：使用智能指针：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> p<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-184"><a class="anchor" href="#exercise-184">#</a> Exercise 18.4</h3><blockquote><p>查看图 18.1 所示的继承体系，说明下面的 <code>try</code> 块有何错误并修改它。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 使用 C++ 标准库</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>exception<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">const</span> runtime_error <span class="token operator">&amp;</span>re<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token comment">// ...</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>overflow_error eobj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>解：</p><p>细化的异常类型应该写在前面：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 使用 C++ 标准库</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>overflow_error eobj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">const</span> runtime_error <span class="token operator">&amp;</span>re<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token comment">// ...</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>exception<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="exercise-185"><a class="anchor" href="#exercise-185">#</a> Exercise 18.5</h3><blockquote><p>修改下面的 <code>main</code> 函数，使其能捕获图 18.1 所示的任何异常类型：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 使用 C++ 标准库</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>处理代码应该首先打印异常相关的错误信息，然后调用 <code>abort</code> 终止函数。</p><p>解：</p><p>略</p><h3 id="exercise-186"><a class="anchor" href="#exercise-186">#</a> Exercise 18.6</h3><blockquote><p>已知下面的异常类型和 <code>catch</code> 语句，书写一个 <code>throw</code> 表达式使其创建的异常对象能被这些 <code>catch</code> 语句捕获：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">exceptionType</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">catch</span><span class="token punctuation">(</span>exceptionType <span class="token operator">*</span>pet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token keyword">typedef</span> <span class="token keyword">int</span> EXCPTYPE<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">catch</span><span class="token punctuation">(</span>EXCPTYPE<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>解：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">throw</span> <span class="token function">exceptionType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">throw</span> <span class="token function">expection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">:</span> EXCPTYPE e <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">throw</span> e<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-187"><a class="anchor" href="#exercise-187">#</a> Exercise 18.7</h3><blockquote><p>根据第 16 章的介绍定义你自己的 <code>Blob</code> 和 <code>BlobPtr</code> ，注意将构造函数写成函数 <code>try</code> 语句块。</p></blockquote><p>解：</p><p>略</p><h3 id="exercise-188"><a class="anchor" href="#exercise-188">#</a> Exercise 18.8</h3><blockquote><p>回顾你之前编写的各个类，为它们的构造函数和析构函数添加正确的异常说明。如果你认为某个析构函数可能抛出异常，尝试修改代码使得该析构函数不会抛出异常。</p></blockquote><p>解：</p><p>略</p><h3 id="exercise-189"><a class="anchor" href="#exercise-189">#</a> Exercise 18.9</h3><blockquote><p>定义本节描述的书店程序异常类，然后为 <code>Sales_data</code> 类重新编写一个复合赋值运算符并令其抛出一个异常。</p></blockquote><h3 id="exercise-1810"><a class="anchor" href="#exercise-1810">#</a> Exercise 18.10</h3><blockquote><p>编写程序令其对两个 <code>ISBN</code> 编号不相同的对象执行 <code>Sales_data</code> 的加法运算。为该程序编写两个不同的版本：一个处理异常，另一个不处理异常。观察并比较这两个程序的行为，用心体会当出现了一个未被捕获的异常时程序会发生什么情况。</p></blockquote><p>解：</p><p>略</p><h3 id="exercise-1811"><a class="anchor" href="#exercise-1811">#</a> Exercise 18.11</h3><blockquote><p>为什么 <code>what</code> 函数不应该抛出异常？</p></blockquote><p>解：</p><p>略</p><h2 id="namespaces"><a class="anchor" href="#namespaces">#</a> Namespaces</h2><hr><h3 id="命名空间"><a class="anchor" href="#命名空间">#</a> 命名空间</h3><p>多个库将名字放置在全局命名空间中将引发<strong>命名空间污染</strong>（namespace pollution）。<strong>命名空间</strong>（namespace）分割了全局命名空间，其中每个命名空间是一个作用域。</p><h4 id="命名空间定义"><a class="anchor" href="#命名空间定义">#</a> 命名空间定义</h4><p>命名空间的定义包含两部分：1. 关键字 <code>namespace</code> ；2. 命名空间名称。后面是一系列由花括号括起来的声明和定义。命名空间作用域后面无需分号。</p><p>示例：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> cplusplus_primer<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>每个命名空间都是一个<strong>作用域</strong>。定义在某个命名空间内的名字可以被该命名空间内的其他成员直接访问，也可以被这些成员内嵌套作用域中的任何单位访问。位于该命名空间之外的代码必须明确指出所用的名字是属于哪个命名空间的。</p><p>命名空间可以是<strong>不连续</strong>的。这点不同于其他作用域，意味着同一命名空间可以在多处出现。</p><p><strong>内联命名空间</strong>（C++11）：</p><p>无需使用该命名空间的前缀，通过外层命名空间就可以直接访问。</p><p>示例：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> cplusplus_primer<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">inline</span> <span class="token keyword">namespace</span> FifthEd<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 表示本书第 5 版代码</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">class</span> <span class="token class-name">Query_base</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>cplusplus_primer<span class="token double-colon punctuation">::</span>Query_base qb<span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>未命名的命名空间</strong>：</p><p>指关键字 <code>namespace</code> 后面紧跟花括号的用法。未命名的命名空间中定义的变量拥有静态的声明周期：在第一次使用前创建，直到程序结束才销毁。不能跨越多个文件。</p><h4 id="使用命名空间成员"><a class="anchor" href="#使用命名空间成员">#</a> 使用命名空间成员</h4><p>像 <code>namespace_name::member_name</code> 这样使用命名空间的成员非常繁琐。</p><p><strong>命名空间的别名</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> primer <span class="token operator">=</span> cplusplus_primer<span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>using 声明</strong>（using declaration）：</p><p>一条 <code>using</code> 声明语句一次只引入命名空间的一个成员。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>string s <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>using 指示</strong>（using directive）：</p><p>使得某个特定的命名空间中所有的名字都可见。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>string s <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="类-命名空间与作用域"><a class="anchor" href="#类-命名空间与作用域">#</a> 类、命名空间与作用域</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> A<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">class</span> <span class="token class-name">C1</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">int</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>A<span class="token double-colon punctuation">::</span>C1<span class="token double-colon punctuation">::</span>f3</pre></td></tr></table></figure><h4 id="重载与命名空间"><a class="anchor" href="#重载与命名空间">#</a> 重载与命名空间</h4><p><code>using</code> 声明语句声明的是一个名字，而非特定的函数，也就是包括该函数的所有版本，都被引入到当前作用域中。</p><hr><h3 id="exercise-1812"><a class="anchor" href="#exercise-1812">#</a> Exercise 18.12</h3><blockquote><p>将你为之前各章练习编写的程序放置在各自的命名空间中。也就是说，命名空间 chapter15 包含 <code>Query</code> 程序的代码，命名空间 chapter10 包含 <code>TextQuery</code> 的代码；使用这种结构重新编译 <code>Query</code> 代码实例。</p></blockquote><p>解：</p><p>略</p><h3 id="exercise-1813"><a class="anchor" href="#exercise-1813">#</a> Exercise 18.13</h3><blockquote><p>什么时候应该使用未命名的命名空间？</p></blockquote><p>解：</p><p>需要定义一系列静态的变量的时候。</p><p>参考：<span class="exturl" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTU0NDY5L3VubmFtZWQtYW5vbnltb3VzLW5hbWVzcGFjZXMtdnMtc3RhdGljLWZ1bmN0aW9ucw==">https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions</span></p><h3 id="exercise-1814"><a class="anchor" href="#exercise-1814">#</a> Exercise 18.14</h3><blockquote><p>假设下面的 <code>operator*</code> 声明的是嵌套的命名空间 <code>mathLib::MatrixLib</code> 的一个成员：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> mathLib <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">namespace</span> MatrixLib <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">class</span> <span class="token class-name">matrix</span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		matrix <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">const</span> matrix <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> matrix <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>请问你应该如何在全局作用域中声明该运算符？</p><p>解：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>mathLib<span class="token double-colon punctuation">::</span>MatrixLib<span class="token double-colon punctuation">::</span>matrix mathLib<span class="token double-colon punctuation">::</span>MatrixLib<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">const</span> mathLib<span class="token double-colon punctuation">::</span>MatrixLib<span class="token double-colon punctuation">::</span>matrix <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> mathLib<span class="token double-colon punctuation">::</span>MatrixLib<span class="token double-colon punctuation">::</span>matrix <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1815"><a class="anchor" href="#exercise-1815">#</a> Exercise 18.15</h3><blockquote><p>说明 <code>using</code> 指示与 <code>using</code> 声明的区别。</p></blockquote><p>解：</p><ul><li>一条 <code>using</code> 声明语句一次只引入命名空间的一个成员。</li><li><code>using</code> 指示使得某个特定的命名空间中所有的名字都可见。</li></ul><p>有点像 python 中的 <code>import</code> :</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> lib <span class="token keyword">import</span> func</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> lib <span class="token keyword">import</span> <span class="token operator">*</span></pre></td></tr></table></figure><h3 id="exercise-1816"><a class="anchor" href="#exercise-1816">#</a> Exercise 18.16</h3><blockquote><p>假定在下面的代码中标记为 “位置 1” 的地方是对命名空间 Exercise 中所有成员的 <code>using</code> 声明，请解释代码的含义。如果这些 <code>using</code> 声明出现在 “位置 2” 又会怎样呢？将 <code>using</code> 声明变为 <code>using</code> 指示，重新回答之前的问题。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> Exercise <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">int</span> ivar <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">double</span> dvar <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">int</span> limit <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> ivar <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 位置 1</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token comment">// 位置 2</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">double</span> dvar <span class="token operator">=</span> <span class="token number">3.1416</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> iobj <span class="token operator">=</span> limit <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token operator">++</span>ivar<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token operator">++</span><span class="token double-colon punctuation">::</span>ivar<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>解：</p><p>略</p><h3 id="exercise-1817"><a class="anchor" href="#exercise-1817">#</a> Exercise 18.17</h3><blockquote><p>实际编写代码检验你对上一题的回答是否正确。</p></blockquote><p>解：</p><p>略</p><h3 id="exercise-1818"><a class="anchor" href="#exercise-1818">#</a> Exercise 18.18</h3><blockquote><p>已知有下面的 <code>swap</code> 的典型定义，当 <code>mem1</code> 是一个 <code>string</code> 时程序使用 <code>swap</code> 的哪个版本？如果 <code>mem1</code> 是 <code>int</code> 呢？说明在这两种情况下名字查找的过程。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>T v1<span class="token punctuation">,</span> T v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>swap<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token function">swap</span><span class="token punctuation">(</span>v1<span class="token punctuation">.</span>mem1<span class="token punctuation">,</span> v2<span class="token punctuation">.</span>mem1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token comment">// 交换类型的其他成员</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>解：</p><p><code>std::swap</code> 是一个模板函数，如果是 <code>string</code> 会找到 <code>string</code> 版本；反之如果是 <code>int</code> 会找到 <code>int</code> 版本。</p><h3 id="exercise-1819"><a class="anchor" href="#exercise-1819">#</a> Exercise 18.19</h3><blockquote><p>如果对 <code>swap</code> 的调用形如 <code>std::swap(v1.mem1, v2.mem1)</code> 将会发生什么情况？</p></blockquote><p>解：</p><p>会直接调用 <code>std</code> 版的 <code>swap</code> ，但对后面的调用无影响。</p><h3 id="exercise-1820"><a class="anchor" href="#exercise-1820">#</a> Exercise 18.20</h3><blockquote><p>在下面的代码中，确定哪个函数与 <code>compute</code> 调用匹配。列出所有候选函数和可行函数，对于每个可行函数的实参与形参的匹配过程来说，发生了哪种类型转换？</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">namespace</span> primerLib <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">using</span> primerLib<span class="token double-colon punctuation">::</span>compute<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">=</span> <span class="token number">3.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token function">compute</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>解：</p><p>略</p><h2 id="multiple-and-virtual-inheritance"><a class="anchor" href="#multiple-and-virtual-inheritance">#</a> Multiple and Virtual Inheritance</h2><hr><h3 id="多重继承与虚继承"><a class="anchor" href="#多重继承与虚继承">#</a> 多重继承与虚继承</h3><h4 id="多重继承"><a class="anchor" href="#多重继承">#</a> 多重继承</h4><h4 id="类型转换与多个基类"><a class="anchor" href="#类型转换与多个基类">#</a> 类型转换与多个基类</h4><h4 id="多重继承下的类作用域"><a class="anchor" href="#多重继承下的类作用域">#</a> 多重继承下的类作用域</h4><ul><li>当一个类拥有多个基类时，有可能出现派生类从两个或更多基类中继承了同名成员的情况。此时，不加前缀限定符直接使用该名字将引发二义性。</li></ul><h4 id="虚继承"><a class="anchor" href="#虚继承">#</a> 虚继承</h4><ul><li>虚继承的目的是令某个类做出声明，承诺愿意共享它的基类。其中，共享的基类子对象成为<strong>虚基类</strong>。在这种机制下，不论虚基类在继承体系中出现了多少次，在派生类中都只包含唯一一个共享的虚基类子对象。</li><li>虚派生只影响从指定了虚基类的派生类中进一步派生出的类，它不会影响派生类本身。</li></ul><h4 id="构造函数与虚继承"><a class="anchor" href="#构造函数与虚继承">#</a> 构造函数与虚继承</h4><ul><li>h 含有虚基类的对象的构造顺序与一般的顺序稍有<strong>区别</strong>：首先使用提供给最底层派生类构造函数的初始值初始化该对象的虚基类子部分，接下来按照直接基类在派生列表中出现的次序对其进行初始化。</li><li>虚基类总是先于非虚基类构造，与它们在继承体系中的次序和位置无关。</li></ul><hr><h3 id="exercise-1821"><a class="anchor" href="#exercise-1821">#</a> Exercise 18.21</h3><blockquote><p>解释下列声明的含义，在它们当作存在错误吗？如果有，请指出来并说明错误的原因。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">CADVehicle</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">CAD</span><span class="token punctuation">,</span> <span class="token class-name">Vehicle</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">DbiList</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">List</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">iostream</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">istream</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">ostream</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1822"><a class="anchor" href="#exercise-1822">#</a> Exercise 18.22</h3><blockquote><p>已知存在如下所示的类的继承体系，其中每个类都定义了一个默认构造函数：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">A</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">B</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">X</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Y</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Z</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">X</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Y</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Z</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>对于下面的定义来说，构造函数的执行顺序是怎样的？</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>MI mi<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1823"><a class="anchor" href="#exercise-1823">#</a> Exercise 18.23</h3><blockquote><p>使用练习 18.22 的继承体系以及下面定义的类 <code>D</code> ，同时假定每个类都定义了默认构造函数，请问下面的哪些类型转换是不被允许的？</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">X</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">C</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>p <span class="token operator">*</span>pd <span class="token operator">=</span> <span class="token keyword">new</span> D<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> X <span class="token operator">*</span>px <span class="token operator">=</span> pd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> A <span class="token operator">*</span>pa <span class="token operator">=</span> pd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> B <span class="token operator">*</span>pb <span class="token operator">=</span> pd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">(</span>d<span class="token punctuation">)</span> C <span class="token operator">*</span>pc <span class="token operator">=</span> pd<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1824"><a class="anchor" href="#exercise-1824">#</a> Exercise 18.24</h3><blockquote><p>在第 714 页，我们使用一个指向 <code>Panda</code> 对象的 <code>Bear</code> 指针进行了一系列调用，假设我们使用的是一个指向 <code>Panda</code> 对象的 <code>ZooAnimal</code> 指针将会发生什么情况，请对这些调用语句逐一进行说明。</p></blockquote><h3 id="exercise-1825"><a class="anchor" href="#exercise-1825">#</a> Exercise 18.25</h3><blockquote><p>假设我们有两个基类 <code>Base1</code> 和 <code>Base2</code> ，它们各自定义了一个名为 <code>print</code> 的虚成员和一个虚析构函数。从这两个基类中文名派生出下面的类，它们都重新定义了 <code>print</code> 函数：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">D1</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base1</span></span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">D2</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base2</span></span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">D1</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">D2</span></span> <span class="token punctuation">&#123;</span> <span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>通过下面的指针，指出在每个调用中分别使用了哪个函数：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>Base1 <span class="token operator">*</span>pb1 <span class="token operator">=</span> <span class="token keyword">new</span> MI<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Base2 <span class="token operator">*</span>pb2 <span class="token operator">=</span> <span class="token keyword">new</span> MI<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>D1 <span class="token operator">*</span>pd1 <span class="token operator">=</span> <span class="token keyword">new</span> MI<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>D2 <span class="token operator">*</span>pd2 <span class="token operator">=</span> <span class="token keyword">new</span> MI<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> pb1<span class="token operator">-></span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> pd1<span class="token operator">-></span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> pd2<span class="token operator">-></span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token keyword">delete</span> pb2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token keyword">delete</span> pd1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token keyword">delete</span> pd2<span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Base1</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> ival<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">double</span> dval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">char</span> cval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> <span class="token operator">*</span>id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Base2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">double</span> fval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">double</span> dval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base1</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	std<span class="token double-colon punctuation">::</span>string sval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">double</span> dval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">MI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Derived</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Base2</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">int</span> <span class="token operator">*</span>ival<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> dvec<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1826"><a class="anchor" href="#exercise-1826">#</a> Exercise 18.26</h3><blockquote><p>已知如上所示的继承体系，下面对 <code>print</code> 的调用为什么是错误的？适当修改 <code>MI</code> ，令其对 <code>print</code> 的调用可以编译通过并正确执行。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>MI mi<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>mi<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1827"><a class="anchor" href="#exercise-1827">#</a> Exercise 18.27</h3><blockquote><p>已知如上所示的继承体系，同时假定为 MI 添加了一个名为 <code>foo</code> 的函数：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> ival<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">double</span> dval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MI</span><span class="token double-colon punctuation">::</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">double</span> cval<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> dval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token comment">// 练习中的问题发生在此处</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> 列出在MI<span class="token double-colon punctuation">::</span>foo中可见的所有名字。</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> 是否存在某个可见的名字是继承自多个基类的？</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> 将Base1的dval成员与Derived 的dval 成员求和后赋给dval的局部实例。</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">(</span>d<span class="token punctuation">)</span> 将MI<span class="token double-colon punctuation">::</span>dvec的最后一个元素的值赋给Base2<span class="token double-colon punctuation">::</span>fval。</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">(</span>e<span class="token punctuation">)</span> 将从Base1继承的cval赋给从Derived继承的sval的第一个字符。</pre></td></tr></table></figure><h3 id="exercise-1828"><a class="anchor" href="#exercise-1828">#</a> Exercise 18.28</h3><blockquote><p>已知存在如下的继承体系，在 <code>VMI</code> 类的内部哪些继承而来的成员无须前缀限定符就能直接访问？哪些必须有限定符才能访问？说明你的原因。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> ival<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Derived1</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">char</span> cval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Derived2</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">int</span> ival<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">char</span> cval<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">VMI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Derived1</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Derived2</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1829"><a class="anchor" href="#exercise-1829">#</a> Exercise 18.29</h3><blockquote><p>已知有如下所示的类继承关系：</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Class</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Class</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">D1</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">D2</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">D1</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">D2</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Final</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">MI</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Class</span></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> 当作用于一个Final对象时，构造函数和析构函数的执行次序分别是什么？</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> 在一个Final对象中有几个Base部分？几个Class部分？</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> 下面的哪些赋值运算符将造成编译错误？</pre></td></tr><tr><td data-num="10"></td><td><pre>Base <span class="token operator">*</span>pb<span class="token punctuation">;</span> Class <span class="token operator">*</span>pc<span class="token punctuation">;</span> MI <span class="token operator">*</span>pmi<span class="token punctuation">;</span> D2 <span class="token operator">*</span>pd2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">(</span>a<span class="token punctuation">)</span> pb <span class="token operator">=</span> <span class="token keyword">new</span> Class<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">(</span>b<span class="token punctuation">)</span> pc <span class="token operator">=</span> <span class="token keyword">new</span> Final<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">(</span>c<span class="token punctuation">)</span> pmi <span class="token operator">=</span> pb<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">(</span>d<span class="token punctuation">)</span> pd2 <span class="token operator">=</span> pmi<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exercise-1830"><a class="anchor" href="#exercise-1830">#</a> Exercise 18.30</h3><blockquote><p>在 <code>Base</code> 中定义一个默认构造函数、一个拷贝构造函数和一个接受 <code>int</code> 形参的构造函数。在每个派生类中分别定义这三种构造函数，每个构造函数应该使用它的形参初始化其 <code>Base</code> 部分。</p></blockquote><h2 id="chapter-summary"><a class="anchor" href="#chapter-summary">#</a> Chapter Summary</h2><p>🍓：）</p><div class="tags"><a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag"><i class="ic i-tag"></i> 读书笔记</a> <a href="/tags/C/" rel="tag"><i class="ic i-tag"></i> C++</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2023-01-30 19:25:58" itemprop="dateModified" datetime="2023-01-30T19:25:58+08:00">2023-01-30</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> Donate</button><p>Give me a cup of [coffee]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Sakupinera WeChat Pay"><p>WeChat Pay</p></div><div><img data-src="/images/alipay.png" alt="Sakupinera Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="Sakupinera PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>Sakupinera <i class="ic i-at"><em>@</em></i>Sakupinera</li><li class="link"><strong>Post link: </strong><a href="http://sakupinera.github.io/2023/01/10/cpp/cpp-primer/Chapter%2018%20Tools%20for%20Large%20Programs/" title="C++ Primer - Chapter 18 Tools for Large Programs">http://sakupinera.github.io/2023/01/10/cpp/cpp-primer/Chapter 18 Tools for Large Programs/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/01/09/cpp/cpp-primer/Chapter%2017%20Specialized%20Library%20Facilities/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicit31ffoj20zk0m8naf.jpg" title="C++ Primer - Chapter 17 Specialized Library Facilities"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> Cpp-Primer</span><h3>C++ Primer - Chapter 17 Specialized Library Facilities</h3></a></div><div class="item right"><a href="/2023/01/11/cpp/cpp-primer/Chapter%2019%20Specialized%20Tools%20and%20Techniques/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipet8c1a2j20zk0m8kct.jpg" title="C++ Primer - Chapter 19 Specialized Tools and Techniques"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> Cpp-Primer</span><h3>C++ Primer - Chapter 19 Specialized Tools and Techniques</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-18-tools-for-large-programs"><span class="toc-number">1.</span> <span class="toc-text">Chapter 18 Tools for Large Programs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#exception-handling"><span class="toc-number">1.1.</span> <span class="toc-text">Exception Handling</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">1.1.1.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">抛出异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">捕获异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#noexcept%E5%BC%82%E5%B8%B8%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">noexcept 异常说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%B1%82%E6%AC%A1"><span class="toc-number">1.1.1.5.</span> <span class="toc-text">异常类层次</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-181"><span class="toc-number">1.1.2.</span> <span class="toc-text">Exercise 18.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-182"><span class="toc-number">1.1.3.</span> <span class="toc-text">Exercise 18.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-183"><span class="toc-number">1.1.4.</span> <span class="toc-text">Exercise 18.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-184"><span class="toc-number">1.1.5.</span> <span class="toc-text">Exercise 18.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-185"><span class="toc-number">1.1.6.</span> <span class="toc-text">Exercise 18.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-186"><span class="toc-number">1.1.7.</span> <span class="toc-text">Exercise 18.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-187"><span class="toc-number">1.1.8.</span> <span class="toc-text">Exercise 18.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-188"><span class="toc-number">1.1.9.</span> <span class="toc-text">Exercise 18.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-189"><span class="toc-number">1.1.10.</span> <span class="toc-text">Exercise 18.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1810"><span class="toc-number">1.1.11.</span> <span class="toc-text">Exercise 18.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1811"><span class="toc-number">1.1.12.</span> <span class="toc-text">Exercise 18.11</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#namespaces"><span class="toc-number">1.2.</span> <span class="toc-text">Namespaces</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.2.1.</span> <span class="toc-text">命名空间</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">命名空间定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%88%90%E5%91%98"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">使用命名空间成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">类、命名空间与作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E8%BD%BD%E4%B8%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">重载与命名空间</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1812"><span class="toc-number">1.2.2.</span> <span class="toc-text">Exercise 18.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1813"><span class="toc-number">1.2.3.</span> <span class="toc-text">Exercise 18.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1814"><span class="toc-number">1.2.4.</span> <span class="toc-text">Exercise 18.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1815"><span class="toc-number">1.2.5.</span> <span class="toc-text">Exercise 18.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1816"><span class="toc-number">1.2.6.</span> <span class="toc-text">Exercise 18.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1817"><span class="toc-number">1.2.7.</span> <span class="toc-text">Exercise 18.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1818"><span class="toc-number">1.2.8.</span> <span class="toc-text">Exercise 18.18</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1819"><span class="toc-number">1.2.9.</span> <span class="toc-text">Exercise 18.19</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1820"><span class="toc-number">1.2.10.</span> <span class="toc-text">Exercise 18.20</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multiple-and-virtual-inheritance"><span class="toc-number">1.3.</span> <span class="toc-text">Multiple and Virtual Inheritance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E4%B8%8E%E8%99%9A%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.1.</span> <span class="toc-text">多重继承与虚继承</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">多重继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8E%E5%A4%9A%E4%B8%AA%E5%9F%BA%E7%B1%BB"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">类型转换与多个基类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E4%B8%8B%E7%9A%84%E7%B1%BB%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">多重继承下的类作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">虚继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E8%99%9A%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">构造函数与虚继承</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1821"><span class="toc-number">1.3.2.</span> <span class="toc-text">Exercise 18.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1822"><span class="toc-number">1.3.3.</span> <span class="toc-text">Exercise 18.22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1823"><span class="toc-number">1.3.4.</span> <span class="toc-text">Exercise 18.23</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1824"><span class="toc-number">1.3.5.</span> <span class="toc-text">Exercise 18.24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1825"><span class="toc-number">1.3.6.</span> <span class="toc-text">Exercise 18.25</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1826"><span class="toc-number">1.3.7.</span> <span class="toc-text">Exercise 18.26</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1827"><span class="toc-number">1.3.8.</span> <span class="toc-text">Exercise 18.27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1828"><span class="toc-number">1.3.9.</span> <span class="toc-text">Exercise 18.28</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1829"><span class="toc-number">1.3.10.</span> <span class="toc-text">Exercise 18.29</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exercise-1830"><span class="toc-number">1.3.11.</span> <span class="toc-text">Exercise 18.30</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chapter-summary"><span class="toc-number">1.4.</span> <span class="toc-text">Chapter Summary</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/2022/12/09/cpp/cpp-primer/Chapter%201%20Getting%20Started/" rel="bookmark" title="C++ Primer - Chapter 1 Getting Started">C++ Primer - Chapter 1 Getting Started</a></li><li><a href="/2022/12/10/cpp/cpp-primer/Chapter%202%20Variables%20and%20Basic%20Types/" rel="bookmark" title="C++ Primer - Chapter 2 Variables and Basic Types">C++ Primer - Chapter 2 Variables and Basic Types</a></li><li><a href="/2022/12/11/cpp/cpp-primer/Chapter%203%20Strings,%20Vectors,%20and%20Arrays/" rel="bookmark" title="C++ Primer - Chapter 3 Strings, Vectors, and Arrays">C++ Primer - Chapter 3 Strings, Vectors, and Arrays</a></li><li><a href="/2022/12/12/cpp/cpp-primer/Chapter%204%20Expressions/" rel="bookmark" title="C++ Primer - Chapter 4 Expressions">C++ Primer - Chapter 4 Expressions</a></li><li><a href="/2022/12/13/cpp/cpp-primer/Chapter%205%20Statements/" rel="bookmark" title="C++ Primer - Chapter 5 Statements">C++ Primer - Chapter 5 Statements</a></li><li><a href="/2022/12/14/cpp/cpp-primer/Chapter%206%20Functions/" rel="bookmark" title="C++ Primer - Chapter 6 Functions">C++ Primer - Chapter 6 Functions</a></li><li><a href="/2022/12/15/cpp/cpp-primer/Chapter%207%20Classes/" rel="bookmark" title="C++ Primer - Chapter 7 Classes">C++ Primer - Chapter 7 Classes</a></li><li><a href="/2022/12/16/cpp/cpp-primer/Chapter%208%20The%20IO%20Library/" rel="bookmark" title="C++ Primer - Chapter 8 The IO Library">C++ Primer - Chapter 8 The IO Library</a></li><li><a href="/2022/12/17/cpp/cpp-primer/Chapter%209%20Sequential%20Containers/" rel="bookmark" title="C++ Primer - Chapter 9 Sequential Containers">C++ Primer - Chapter 9 Sequential Containers</a></li><li><a href="/2023/01/02/cpp/cpp-primer/Chapter%2010%20Generic%20Algorithms/" rel="bookmark" title="C++ Primer - Chapter 10 Generic Algorithms">C++ Primer - Chapter 10 Generic Algorithms</a></li><li><a href="/2023/01/03/cpp/cpp-primer/Chapter%2011%20Associative%20Containers/" rel="bookmark" title="C++ Primer - Chapter 11 Associative Containers">C++ Primer - Chapter 11 Associative Containers</a></li><li><a href="/2023/01/04/cpp/cpp-primer/Chapter%2012%20Dynamic%20Memory/" rel="bookmark" title="C++ Primer - Chapter 12 Dynamic Memory">C++ Primer - Chapter 12 Dynamic Memory</a></li><li><a href="/2023/01/05/cpp/cpp-primer/Chapter%2013%20Copy%20Control/" rel="bookmark" title="C++ Primer - Chapter 13 Copy Control">C++ Primer - Chapter 13 Copy Control</a></li><li><a href="/2023/01/06/cpp/cpp-primer/Chapter%2014%20Overloaded%20Operations%20and%20Conversions/" rel="bookmark" title="C++ Primer - Chapter 14 Overloaded Operations and Conversions">C++ Primer - Chapter 14 Overloaded Operations and Conversions</a></li><li><a href="/2023/01/07/cpp/cpp-primer/Chapter%2015%20Object-Oriented%20Programming/" rel="bookmark" title="C++ Primer - Chapter 15 Object-Oriented Programming">C++ Primer - Chapter 15 Object-Oriented Programming</a></li><li><a href="/2023/01/08/cpp/cpp-primer/Chapter%2016%20Templates%20and%20Generic%20Programming/" rel="bookmark" title="C++ Primer - Chapter 16 Templates and Generic Programming">C++ Primer - Chapter 16 Templates and Generic Programming</a></li><li><a href="/2023/01/09/cpp/cpp-primer/Chapter%2017%20Specialized%20Library%20Facilities/" rel="bookmark" title="C++ Primer - Chapter 17 Specialized Library Facilities">C++ Primer - Chapter 17 Specialized Library Facilities</a></li><li class="active"><a href="/2023/01/10/cpp/cpp-primer/Chapter%2018%20Tools%20for%20Large%20Programs/" rel="bookmark" title="C++ Primer - Chapter 18 Tools for Large Programs">C++ Primer - Chapter 18 Tools for Large Programs</a></li><li><a href="/2023/01/11/cpp/cpp-primer/Chapter%2019%20Specialized%20Tools%20and%20Techniques/" rel="bookmark" title="C++ Primer - Chapter 19 Specialized Tools and Techniques">C++ Primer - Chapter 19 Specialized Tools and Techniques</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Sakupinera" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Sakupinera</p><div class="description" itemprop="description">保持你的决心！</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">89</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">17</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">8</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Nha3VwaW5lcmE=" title="https:&#x2F;&#x2F;github.com&#x2F;sakupinera"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQwNzIyOTA3MQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;407229071"><i class="ic i-cloud-music"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMjIzMDczOTg/c3BtX2lkX2Zyb209MzMzLjEwMDcuMC4w" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;22307398?spm_id_from&#x3D;333.1007.0.0"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/games/" rel="section"><i class="ic i-flag"></i>games</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-person"></i>About</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/01/09/cpp/cpp-primer/Chapter%2017%20Specialized%20Library%20Facilities/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/01/11/cpp/cpp-primer/Chapter%2019%20Specialized%20Tools%20and%20Techniques/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="In Linux">Linux</a> <i class="ic i-angle-right"></i> <a href="/categories/Linux/Learn-Linux/" title="In Learn-Linux">Learn-Linux</a></div><span><a href="/2022/08/28/linux/learn-linux/%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/" title="LearnLinux - 软件包管理">LearnLinux - 软件包管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Computer-Graphics/" title="In Computer-Graphics">Computer-Graphics</a> <i class="ic i-angle-right"></i> <a href="/categories/Computer-Graphics/GAMES101/" title="In GAMES101">GAMES101</a></div><span><a href="/2022/09/30/computer-graphics/games101/%E7%9D%80%E8%89%B2/" title="GAMES101 - Shading（着色）">GAMES101 - Shading（着色）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Cpp/" title="In Cpp">Cpp</a> <i class="ic i-angle-right"></i> <a href="/categories/Cpp/Cpp-Primer/" title="In Cpp-Primer">Cpp-Primer</a></div><span><a href="/2023/01/09/cpp/cpp-primer/Chapter%2017%20Specialized%20Library%20Facilities/" title="C++ Primer - Chapter 17 Specialized Library Facilities">C++ Primer - Chapter 17 Specialized Library Facilities</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2023/02/10/csharp/clr-via-csharp/Chapter%2030%20Hybrid%20Thread%20Synchronization%20Constructs/" title="CLR via C# - Chapter 30 Hybrid Thread Synchronization">CLR via C# - Chapter 30 Hybrid Thread Synchronization</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Computer-Graphics/" title="In Computer-Graphics">Computer-Graphics</a> <i class="ic i-angle-right"></i> <a href="/categories/Computer-Graphics/GAMES101/" title="In GAMES101">GAMES101</a></div><span><a href="/2022/10/21/computer-graphics/games101/%E6%B8%B2%E6%9F%93%E4%B8%AD%E7%9A%84%E9%AB%98%E7%BA%A7%E4%B8%BB%E9%A2%98/" title="GAMES101 - Advanced Topics in Rendering（渲染中的高级主题）">GAMES101 - Advanced Topics in Rendering（渲染中的高级主题）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/" title="CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types">CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Game-Engine/" title="In Game-Engine">Game-Engine</a> <i class="ic i-angle-right"></i> <a href="/categories/Game-Engine/Unity/" title="In Unity">Unity</a></div><span><a href="/2023/08/24/game-engine/unity/UI/" title="Unity - UI">Unity - UI</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="In Linux">Linux</a> <i class="ic i-angle-right"></i> <a href="/categories/Linux/Learn-Linux/" title="In Learn-Linux">Learn-Linux</a></div><span><a href="/2022/09/05/linux/learn-linux/Linux%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/" title="LearnLinux - Linux服务管理">LearnLinux - Linux服务管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/11/04/csharp/clr-via-csharp/Chapter%2013%20Interfaces/" title="CLR via C# - Chapter 13 Interfaces">CLR via C# - Chapter 13 Interfaces</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="In Linux">Linux</a> <i class="ic i-angle-right"></i> <a href="/categories/Linux/Learn-Linux/" title="In Learn-Linux">Learn-Linux</a></div><span><a href="/2022/09/02/linux/learn-linux/Shell%E5%9F%BA%E7%A1%80/" title="LearnLinux - Shell基础">LearnLinux - Shell基础</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Sakupinera @ Hanamai Sora</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">2.2m words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">34:05</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/01/10/cpp/cpp-primer/Chapter 18 Tools for Large Programs/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/assets/shifuku.model.json"},display:{position:"left",width:250,height:500},mobile:{show:!1},react:{opacity:.9},log:!1})</script></body></html>