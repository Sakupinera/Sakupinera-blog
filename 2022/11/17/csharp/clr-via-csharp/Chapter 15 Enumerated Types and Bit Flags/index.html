<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Sakupinera" href="http://sakupinera.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Sakupinera" href="http://sakupinera.github.io/atom.xml"><link rel="alternate" type="application/json" title="Sakupinera" href="http://sakupinera.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="读书笔记,C#"><link rel="canonical" href="http://sakupinera.github.io/2022/11/17/csharp/clr-via-csharp/Chapter%2015%20Enumerated%20Types%20and%20Bit%20Flags/"><title>CLR via C# - Chapter 15 Enumerated Types and Bit Flags - CLR-via-CSharp - CSharp | Hanamai Sora = Sakupinera</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">CLR via C# - Chapter 15 Enumerated Types and Bit Flags</h1><div class="meta"><span class="item" title="Created: 2022-11-17 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2022-11-17T00:00:00+08:00">2022-11-17</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>23k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>21 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Hanamai Sora</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2023/03/08/DFUCvo21fTb5mwG.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/03/08/XtZcHusj92O56kz.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/03/08/jV3gF2wSUYTdtsp.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/03/08/Qi9cMFjDZq5V3tB.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/03/08/5rFIQnpK6fEoLOU.png"></li><li class="item" data-background-image="https://s2.loli.net/2023/03/08/iXZtNJQI2kjGuqS.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/CSharp/" itemprop="item" rel="index" title="In CSharp"><span itemprop="name">CSharp</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/CSharp/CLR-via-CSharp/" itemprop="item" rel="index" title="In CLR-via-CSharp"><span itemprop="name">CLR-via-CSharp</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="http://sakupinera.github.io/2022/11/17/csharp/clr-via-csharp/Chapter%2015%20Enumerated%20Types%20and%20Bit%20Flags/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Sakupinera"><meta itemprop="description" content=", 保持你的决心！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sakupinera"></span><div class="body md" itemprop="articleBody"><h1 id="chapter-15-enumerated-types-and-bit-flags"><a class="anchor" href="#chapter-15-enumerated-types-and-bit-flags">#</a> Chapter 15 Enumerated Types and Bit Flags</h1><h2 id="enumerated-types"><a class="anchor" href="#enumerated-types">#</a> Enumerated Types</h2><blockquote><p>An enumerated type is a type that defines a set of symbolic name and value pairs. For example, the <code>Color</code> type shown here defines a set of symbols, with each symbol identifying a single color.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">internal</span> <span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre> White<span class="token punctuation">,</span> <span class="token comment">// Assigned a value of 0 </span></pre></td></tr><tr><td data-num="3"></td><td><pre> Red<span class="token punctuation">,</span> <span class="token comment">// Assigned a value of 1 </span></pre></td></tr><tr><td data-num="4"></td><td><pre> Green<span class="token punctuation">,</span> <span class="token comment">// Assigned a value of 2 </span></pre></td></tr><tr><td data-num="5"></td><td><pre> Blue<span class="token punctuation">,</span> <span class="token comment">// Assigned a value of 3 </span></pre></td></tr><tr><td data-num="6"></td><td><pre> Orange <span class="token comment">// Assigned a value of 4 </span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>Of course, programmers can always write a program using 0 to represent white, 1 to represent red, and so on. However, programmers shouldn’t hard-code numbers into their code and should use an enumerated type instead, for at least two reasons:</p><ul><li><p>Enumerated types make the program much easier to write, read, and maintain. With enumerated types, the symbolic name is used throughout the code, and the programmer doesn’t have to mentally map the meaning of each hard-coded value (for example, white is 0 or vice versa). Also, should a symbol’s numeric value change, the code can simply be recompiled without requiring any changes to the source code. In addition, documentation tools and other utilities, such as a debugger, can show meaningful symbolic names to the programmer.</p></li><li><p>Enumerated types are strongly typed. For example, the compiler will report an error if I attempt to pass <code>Color.Orange</code> as a value to a method requiring a Fruit enumerated type as a parameter.</p></li></ul></blockquote><blockquote><p>In the Microsoft .NET Framework, enumerated types are more than just symbols that the compiler cares about. Enumerated types are treated as first-class citizens in the type system, which allows for very powerful operations that simply can’t be done with enumerated types in other environments (such as in unmanaged C++, for example).</p></blockquote><blockquote><p>Every enumerated type is derived directly from <code>System.Enum</code> , which is derived from <code>System.ValueType</code> , which in turn is derived from <code>System.Object</code> . So enumerated types are value types (described in Chapter 5, “Primitive, Reference, and Value Types”) and can be represented in unboxed and boxed forms. However, unlike other value types, an enumerated type can’t define any methods, properties, or events. However, you can use C#’s extension methods feature to simulate adding methods to an enumerated type. See the “Adding Methods to Enumerated Types” section at the end of this chapter for an example of this.</p></blockquote><blockquote><p>When an enumerated type is compiled, the C# compiler turns each symbol into a constant field of the type. For example, the compiler treats the <code>Color</code> enumeration shown earlier as if you had written code similar to the following.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">internal</span> <span class="token keyword">struct</span> <span class="token class-name">Color</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>Enum</span></span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token comment">// Following are public constants defining Color's symbols and values </span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name">Color</span> White <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name">Color</span> Red <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name">Color</span> Green <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token number">2</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name">Color</span> Blue <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token number">3</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name">Color</span> Orange <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token number">4</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token comment">// Following is a public instance field containing a Color variable's value </span></pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token comment">// You cannot write code that references this instance field directly </span></pre></td></tr><tr><td data-num="10"></td><td><pre> <span class="token keyword">public</span> <span class="token class-name">Int32</span> value__<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>The C# compiler won’t actually compile this code because it forbids you from defining a type derived from the special <code>System.Enum</code> type. However, this pseudo-type definition shows you what’s happening internally. Basically, an enumerated type is just a structure with a bunch of constant fields defined in it and one instance field. The constant fields are emitted to the assembly’s metadata and can be accessed via reflection. This means that you can get all of the symbols and their values associated with an enumerated type at run time. It also means that you can convert a string symbol into its equivalent numeric value. These operations are made available to you by the <code>System.Enum</code> base type, which offers several static and instance methods that can be performed on an instance of an enumerated type, saving you the trouble of having to use reflection. I’ll discuss some of these operations next.</p></blockquote><p>💡重要提示：枚举类型定义的符号时常量值。所以当编译器发现代码引用了枚举类型的符号时，会在编译时用数值替换符号，代码不再引用定义了符号的枚举类型。这意味着运行时可能并不不要定义了枚举类型的程序集，编译时才需要。假如代码引用了枚举类型 (而非仅仅引用类型定义的符号)，那么运行时就需要包含了枚举类型定义的程序集。可能会出现一些版本问题，因为枚举类型符号是常量，而非只读的值。7.1 节 “常量” 已解释过这些问题。</p><blockquote><p>For example, the <code>System.Enum</code> type has a static method called <code>GetUnderlyingType</code> , and the <code>System.Type</code> type has an instance method called <code>GetEnumUnderlyingType</code> .</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Type</span> <span class="token function">GetUnderlyingType</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Enum</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name">Type</span> <span class="token function">GetEnumUnderlyingType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Type</span></pre></td></tr></table></figure><blockquote><p>These methods return the core type used to hold an enumerated type’s value. Every enumerated type has an underlying type, which can be a byte, sbyte, short, ushort, int (the most common type and what C# chooses by default), uint, long, or ulong. Of course, these C# primitive types correspond to FCL types. However, to make the implementation of the compiler itself simpler, the C# compiler requires you to specify a primitive type name here; using an FCL type name (such as Int32) generates the following message: error CS1008: Type byte, sbyte, short, ushort, int, uint, long, or ulong expected. The following code shows how to declare an enumerated type with an underlying type of byte ( <code>System.Byte</code> ).</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">internal</span> <span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">byte</span></span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre> White<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="3"></td><td><pre> Red<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="4"></td><td><pre> Green<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> Blue<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="6"></td><td><pre> Orange </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>With the <code>Color</code> enumerated type defined in this way, the following code shows what <code>GetUnderlyingType</code> will return.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// The following line displays "System.Byte". </span></pre></td></tr><tr><td data-num="2"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">GetUnderlyingType</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>The C# compiler treats enumerated types as primitive types. As such, you can use many of the familiar operators (==, !=, &lt;, &gt;, &lt;=, &gt;=, +, -, ^, &amp;, |, ~, ++, and --) to manipulate enumerated type instances. All of these operators actually work on the value__ instance field inside each enumerated type instance. Furthermore, the C# compiler allows you to explicitly cast instances of an enumerated type to a different enumerated type. You can also explicitly cast an enumerated type instance to a numeric type.</p></blockquote><blockquote><p>Given an instance of an enumerated type, it’s possible to map that value to one of several string representations by calling the ToString method inherited from <code>System.Enum</code> .</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Color</span> c <span class="token operator">=</span> Color<span class="token punctuation">.</span>Blue<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Blue" (General format) </span></pre></td></tr><tr><td data-num="3"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Blue" (General format) </span></pre></td></tr><tr><td data-num="4"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"G"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Blue" (General format) </span></pre></td></tr><tr><td data-num="5"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "3" (Decimal format) </span></pre></td></tr><tr><td data-num="6"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"X"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "03" (Hex format)</span></pre></td></tr></table></figure><p>💡注意：使用十六进制格式时， <code>ToString</code> 总是输出大写字母。此外，输出几位数取决于枚举的基础类型： <code>byte/sbyte</code> 输出 2 位数， <code>short/ushort</code> 输出 4 位数， <code>int/uint</code> 输出 8 位数，而 <code>long/ulong</code> 输出 16 位数。如有必要会添加前导零。</p><blockquote><p>In addition to the <code>ToString</code> method, the <code>System.Enum</code> type offers a static Format method that you can call to format an enumerated type’s value.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">String</span> <span class="token function">Format</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">,</span> <span class="token class-name">Object</span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">String</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>Generally, I prefer to call the ToString method because it requires less code and it’s easier to call. But using Format has one advantage over ToString: Format lets you pass a numeric value for the value parameter; you don’t have to have an instance of the enumerated type. For example, the following code will display “Blue”.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// The following line displays "Blue". </span></pre></td></tr><tr><td data-num="2"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Byte<span class="token punctuation">)</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"G"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>💡注意：声明有多个符号的枚举类型时，所有符号都可以有相同的数值。使用常规格式将数值转换为符号时， <code>Enum</code> 的方法会返回其中一个符号，但不保证具体返回哪一个符号名称。另外，如果没有为要查找的数值定义符号，会返回包含该数值的字符串。</p><blockquote><p>It’s also possible to call <code>System.Enum</code> ’s static <code>GetValues</code> method or <code>System.Type</code> ’s instance <code>GetEnumValues</code> method to obtain an array that contains one element for each symbolic name in an enumerated type; each element contains the symbolic name’s numeric value.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Array</span> <span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Enum</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name">Array</span> <span class="token function">GetEnumValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Type</span></pre></td></tr></table></figure><blockquote><p>Using this method along with the ToString method, you can display all of an enumerated type’s symbolic and numeric values, like the following.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Color<span class="token punctuation">[</span><span class="token punctuation">]</span></span> colors <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Number of symbols defined: "</span> <span class="token operator">+</span> colors<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Value\tSymbol\n-----\t------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Color</span> c <span class="token keyword">in</span> colors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token comment">// Display each symbol in Decimal and General format. </span></pre></td></tr><tr><td data-num="6"></td><td><pre> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"&#123;0,5:D&#125;\t&#123;0:G&#125;"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>The previous code produces the following output.</p></blockquote><pre><code class="language-cmd">Number of symbols defined: 5 
Value Symbol 
----- ----- 
 0 White 
 1 Red 
 2 Green 
 3 Blue 
 4 Orange
</code></pre><blockquote><p>Personally, I don’t like the <code>GetValues</code> and <code>GetEnumValues</code> methods because they both return an Array, which I then have to cast to the appropriate array type. So, I always define my own method.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">TEnum<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token generic-method"><span class="token function">GetEnumValues</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEnum<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">TEnum</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">struct</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">return</span> <span class="token punctuation">(</span>TEnum<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">TEnum</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>With my generic <code>GetEnumValues</code> method, I can get better compile-time type-safety and simplify the first line of code in the previous example to the following.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Color<span class="token punctuation">[</span><span class="token punctuation">]</span></span> colors <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetEnumValues</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Color<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>This discussion shows some of the cool operations that can be performed on enumerated types. I suspect that the <code>ToString</code> method with the general format will be used quite frequently to show symbolic names in a program’s user interface elements (list boxes, combo boxes, and the like), as long as the strings don’t need to be localized (because enumerated types offer no support for localization). In addition to the <code>GetValues</code> method, the <code>System.Enum</code> type and the <code>System.Type</code> type also offer the following methods that return an enumerated type’s symbols.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// Returns a String representation for the numeric value </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">String</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">,</span> <span class="token class-name">Object</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Enum</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name">String</span> <span class="token function">GetEnumName</span><span class="token punctuation">(</span><span class="token class-name">Object</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Type</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// Returns an array of Strings: one per symbol defined in the enum </span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">String<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">GetNames</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Enum</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name">String<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">GetEnumNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Type</span></pre></td></tr></table></figure><blockquote><p>I’ve discussed a lot of methods that you can use to look up an enumerated type’s symbol. But you also need a method that can look up a symbol’s equivalent value, an operation that could be used to convert a symbol that a user enters into a text box, for example. Converting a symbol to an instance of an enumerated type is easily accomplished by using one of <code>Enum</code> ’s static Parse and <code>TryParse</code> methods.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Object</span> <span class="token function">Parse</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Object</span> <span class="token function">Parse</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span> ignoreCase<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Boolean</span> <span class="token generic-method"><span class="token function">TryParse</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEnum<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">TEnum</span> result<span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">TEnum</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">struct</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Boolean</span> <span class="token generic-method"><span class="token function">TryParse</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEnum<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span> ignoreCase<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">TEnum</span> result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token keyword">where</span> <span class="token class-name">TEnum</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">struct</span></span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>Here’s some code demonstrating how to use this method.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// Because Orange is defined as 4, 'c' is initialized to 4. </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Color</span> c <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> Enum<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// Because Brown isn't defined, an ArgumentException is thrown. </span></pre></td></tr><tr><td data-num="4"></td><td><pre>c <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span> Enum<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Brown"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// Creates an instance of the Color enum with a value of 1 </span></pre></td></tr><tr><td data-num="6"></td><td><pre>Enum<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryParse</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Color<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">out</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// Creates an instance of the Color enum with a value of 23 </span></pre></td></tr><tr><td data-num="8"></td><td><pre>Enum<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryParse</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Color<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"23"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">out</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>Finally, using the following Enum’s static IsDefined method and Type’s IsEnumDefined method:</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Boolean</span> <span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token class-name">Type</span> enumType<span class="token punctuation">,</span> <span class="token class-name">Object</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Enum</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name">Boolean</span> <span class="token function">IsEnumDefined</span><span class="token punctuation">(</span><span class="token class-name">Object</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Defined in System.Type</span></pre></td></tr><tr><td data-num="3"></td><td><pre>you can determine whether a numeric <span class="token keyword">value</span> <span class="token keyword">is</span> <span class="token class-name">legal</span> <span class="token keyword">for</span> an enumerated type<span class="token punctuation">.</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// Displays "True" because Color defines Red as 1 </span></pre></td></tr><tr><td data-num="5"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Byte<span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// Displays "True" because Color defines White as 0 </span></pre></td></tr><tr><td data-num="7"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"White"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// Displays "False" because a case-sensitive check is performed </span></pre></td></tr><tr><td data-num="9"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"white"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// Displays "False" because Color doesn't have a symbol of value 10 </span></pre></td></tr><tr><td data-num="11"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Byte<span class="token punctuation">)</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>The IsDefined method is frequently used for parameter validation. Here’s an example.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentOutOfRangeException</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">"Invalid Color value."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token comment">// Set color to White, Red, Green, Blue, or Orange </span></pre></td></tr><tr><td data-num="6"></td><td><pre> <span class="token range operator">..</span><span class="token punctuation">.</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>The parameter validation is useful because someone could call <code>SetColor</code> like the following.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token number">547</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>Because no symbol has a corresponding value of 547, the <code>SetColor</code> method will throw an <code>ArgumentOutOfRangeException</code> exception, indicating which parameter is invalid and why.</p></blockquote><p>💡重要提示： <code>IsDefined</code> 方法很方便，但必须慎用。首先， <code>IsDefined</code> 总是执行区分大小写的查找，而且完全没有办法让它执行不区分大小写的查找。其次， <code>IsDefined</code> 相当慢，因为它在内部使用了反射。如果写代码来手动检查每一个可能的值，应用程序的性能极有可能变得更好。最后，只有当枚举类型本身在调用 <code>IsDefined</code> 的同一个程序集中定义， <code>SetColor</code> 方法在另一个程序集中定义。 <code>SetColor</code> 方法调用 <code>IsDefined</code> ，假如颜色是 <code>White</code> ， <code>Red</code> , <code>Green</code> , <code>Blue</code> 或者 <code>Orange</code> ，那么 <code>SetColor</code> 能正常执行。然而，假如 <code>Color</code> 枚举将来发生了变化，在其中包含了 <code>Purple</code> ，那么 <code>SetColor</code> 现在就会接受 <code>Purple</code> ，这是以前没有预料到的。因此，方法现在可能返回无法预料的结果。</p><blockquote><p>Finally, the <code>System.Enum</code> type offers a set of static <code>ToObject</code> methods that convert an instance of a Byte, SByte, Int16, UInt16, Int32, UInt32, Int64, or UInt64 to an instance of an enumerated type.</p></blockquote><blockquote><p>Enumerated types are always used in conjunction with some other type. Typically, they’re used for the type’s method parameters or return type, properties, and fields. A common question that arises is whether to define the enumerated type nested within the type that requires it or to define the enumerated type at the same level as the type that requires it. If you examine the FCL, you’ll see that an enumerated type is usually defined at the same level as the class that requires it. The reason is simply to make the developer’s life a little easier by reducing the amount of typing required. So you should define your enumerated type at the same level unless you’re concerned about name conflicts.</p></blockquote><p>💡小结：枚举类型（enumerated type）定义了一组 “符号名称 / 值” 配对。<span class="exturl" data-url="aHR0cDovL3huLS1NaWNyb3NvZnQta2Q1cC5ORVQ=">在 Microsoft.NET</span> Framework 中，枚举类型不只是编译器所关心的符号，它还是类型系统中的 “一等公民”，能实现很强大的操作。每个枚举类型都直接从 <code>System.Enum</code> 派生，后者从 <code>System.ValueType</code> 派生，而 <code>System.ValueType</code> 又从 <code>System.Object</code> 派生。所以，枚举类型是值类型，可用未装箱和已装箱的形式来表示。但有别于其他值类型，枚举类型不能定义任何方法、属性或事件。不过，可利用 C# 的 “扩展方法” 功能模拟向枚举类型添加方法。简单地说，枚举类型只是一个结构，其中定义了一组常量字段和一个实例字段。常量字段会嵌入程序集的元数据中，并可通过反射来访问。这意味着可以在运行时获得与枚举类型关联的所有符号及其值。 <code>System.Enum</code> 类型有一个名为 <code>GetUnderlying</code> 的静态方法，而 <code>System.Type</code> 类型有一个名为 <code>GetEnumUnderlyingType</code> 的实例方法。这些方法返回用于容纳一个枚举类型的值的基础类型。每个枚举类型都有一个基础类型，它可以是 byte，sbyte，short，ushort，int（最常用，也是 C# 默认选择的），uint，long 或 ulong。虽然这些 C# 基元类型都有对应的 FCL 类型，但 C# 编译器为了简化本身的实现，要求只能指定基元类型名称。不要混淆 “基础类型”（underlying type）和 “基元类型”（primitive type）。虽然枚举的基础类型就是这些基元类型（其实就是除 Char 之外的所有整型），但英语中用 underlying type 和 primitive type 进行了区分，中文翻译同样要区分。C# 编译器将枚举类型视为基元类型。所以可用许多熟悉的操作符（==，!=，&lt;，&gt;，&lt;=，&gt;=，+，-，^，&amp;，|，~，++ 和 --）来操纵枚举类型的实例。所有这些操作符实际作用于每个枚举类型实力内部的 <code>value__</code> 实例字段。此外，C# 编译器允许将枚举类型的实例显式转型为不同的枚举类型。也可显式将枚举类型实例转型为数值类型。检查 FCL，会发现枚举类型通常与需要它的类同级。原因很简单，就是减少代码的录入量，使开发人员的工作变得更轻松。所以，除非担心名称冲突，否则你定义的枚举类型应该和需要它的类型同级。</p><h2 id="bit-flags"><a class="anchor" href="#bit-flags">#</a> Bit Flags</h2><blockquote><p>Programmers frequently work with sets of bit flags. When you call the System.IO.File type’s GetAttributes method, it returns an instance of a FileAttributes type. A FileAttributes type is an instance of an Int32-based enumerated type, in which each bit reflects a single attribute of the file. The FileAttributes type is defined in the FCL as follows.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Flags</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span></span><span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">FileAttributes</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre> ReadOnly <span class="token operator">=</span> <span class="token number">0x00001</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="4"></td><td><pre> Hidden <span class="token operator">=</span> <span class="token number">0x00002</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> System <span class="token operator">=</span> <span class="token number">0x00004</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="6"></td><td><pre> Directory <span class="token operator">=</span> <span class="token number">0x00010</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="7"></td><td><pre> Archive <span class="token operator">=</span> <span class="token number">0x00020</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="8"></td><td><pre> Device <span class="token operator">=</span> <span class="token number">0x00040</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="9"></td><td><pre> Normal <span class="token operator">=</span> <span class="token number">0x00080</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="10"></td><td><pre> Temporary <span class="token operator">=</span> <span class="token number">0x00100</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="11"></td><td><pre> SparseFile <span class="token operator">=</span> <span class="token number">0x00200</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="12"></td><td><pre> ReparsePoint <span class="token operator">=</span> <span class="token number">0x00400</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="13"></td><td><pre> Compressed <span class="token operator">=</span> <span class="token number">0x00800</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="14"></td><td><pre> Offline <span class="token operator">=</span> <span class="token number">0x01000</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="15"></td><td><pre> NotContentIndexed <span class="token operator">=</span> <span class="token number">0x02000</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="16"></td><td><pre> Encrypted <span class="token operator">=</span> <span class="token number">0x04000</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="17"></td><td><pre> IntegrityStream <span class="token operator">=</span> <span class="token number">0x08000</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="18"></td><td><pre> NoScrubData <span class="token operator">=</span> <span class="token number">0x20000</span> </pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>To determine whether a file is hidden, you would execute code like the following.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> file <span class="token operator">=</span> Assembly<span class="token punctuation">.</span><span class="token function">GetEntryAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Location<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">FileAttributes</span> attributes <span class="token operator">=</span> File<span class="token punctuation">.</span><span class="token function">GetAttributes</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Is &#123;0&#125; hidden? &#123;1&#125;"</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> <span class="token punctuation">(</span>attributes <span class="token operator">&amp;</span> FileAttributes<span class="token punctuation">.</span>Hidden<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>💡注意： <code>Enum</code> 类定义了一个 <code>HasFlag</code> 方法：</p><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token return-type class-name">Boolean</span> <span class="token function">HasFlag</span><span class="token punctuation">(</span><span class="token class-name">Enum</span> flag<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>可利用该方法重写上述 <code>Console.WriteLine</code> 调用：</p><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Is &#123;0&#125; hidden? &#123;1&#125;"</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> attributes<span class="token punctuation">.</span><span class="token function">HasFlag</span><span class="token punctuation">(</span>FileAttributes<span class="token punctuation">.</span>Hidden<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>但我建议避免使用 <code>HasFlag</code> 方法，理由是：由于它获取 <code>Enum</code> 类型的参数，所以传给它的任何值都必须装箱，产生一次内存分配。</p><blockquote><p>And here’s code demonstrating how to change a file’s attributes to read-only and hidden.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre>File<span class="token punctuation">.</span><span class="token function">SetAttributes</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> FileAttributes<span class="token punctuation">.</span>ReadOnly <span class="token operator">|</span> FileAttributes<span class="token punctuation">.</span>Hidden<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>As the FileAttributes type shows, it’s common to use enumerated types to express the set of bit flags that can be combined. However, although enumerated types and bit flags are similar, they don’t have exactly the same semantics. For example, enumerated types represent single numeric values, and bit flags represent a set of bits, some of which are on, and some of which are off.</p></blockquote><blockquote><p>When defining an enumerated type that is to be used to identify bit flags, you should, of course, explicitly assign a numeric value to each symbol. Usually, each symbol will have an individual bit turned on. It is also common to see a symbol called None defined with a value of 0, and you can also define symbols that represent commonly used combinations (see the following ReadWrite symbol). It’s also highly recommended that you apply the System.FlagsAttribute custom attribute type to the enumerated type, as shown here:</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Flags</span></span><span class="token punctuation">]</span> <span class="token comment">// The C# compiler allows either "Flags" or "FlagsAttribute". </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">internal</span> <span class="token keyword">enum</span> <span class="token class-name">Actions</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre> None <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="4"></td><td><pre> Read <span class="token operator">=</span> <span class="token number">0x0001</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> Write <span class="token operator">=</span> <span class="token number">0x0002</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="6"></td><td><pre> ReadWrite <span class="token operator">=</span> Actions<span class="token punctuation">.</span>Read <span class="token operator">|</span> Actions<span class="token punctuation">.</span>Write<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="7"></td><td><pre> Delete <span class="token operator">=</span> <span class="token number">0x0004</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="8"></td><td><pre> Query <span class="token operator">=</span> <span class="token number">0x0008</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="9"></td><td><pre> Sync <span class="token operator">=</span> <span class="token number">0x0010</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>Because Actions is an enumerated type, you can use all of the methods described in the previous section when working with bit-flag enumerated types. However, it would be nice if some of those functions behaved a little differently. For example, let’s say you had the following code.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Actions</span> actions <span class="token operator">=</span> Actions<span class="token punctuation">.</span>Read <span class="token operator">|</span> Actions<span class="token punctuation">.</span>Delete<span class="token punctuation">;</span> <span class="token comment">// 0x0005 </span></pre></td></tr><tr><td data-num="2"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>actions<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Read, Delete"</span></pre></td></tr></table></figure><blockquote><p>When ToString is called, it attempts to translate the numeric value into its symbolic equivalent. The numeric value is 0x0005, which has no symbolic equivalent. However, the ToString method detects the existence of the [Flags] attribute on the Actions type, and ToString now treats the numeric value not as a single value but as a set of bit flags. Because the 0x0001 and 0x0004 bits are set, ToString generates the following string: &quot;Read, Delete&quot;. If you remove the [Flags] attribute from the Actions type, ToString would return “5”.</p></blockquote><blockquote><p>I discussed the ToString method in the previous section, and I showed that it offered three ways to format the output: “G” (general), “D” (decimal), and “X” (hex). When you’re formatting an instance of an enumerated type by using the general format, the type is first checked to see if the [Flags] attribute is applied to it. If this attribute is not applied, a symbol matching the numeric value is looked up and returned. If the [Flags] attribute is applied, ToString works like this:</p><ol><li>The set of numeric values defined by the enumerated type is obtained, and the numbers are sorted in descending order.</li><li>Each numeric value is bitwise-ANDed with the value in the enum instance, and if the result equals the numeric value, the string associated with the numeric value is appended to the output string, and the bits are considered accounted for and are turned off. This step is repeated until all numeric values have been checked or until the enum instance has all of its bits turned off.</li><li>If, after all the numeric values have been checked, the enum instance is still not 0, the enum instance has some bits turned on that do not correspond to any defined symbols. In this case, ToString returns the original number in the enum instance as a string.</li><li>If the enum instance’s original value wasn’t 0, the string with the comma-separated set of symbols is returned.</li><li>If the enum instance’s original value was 0 and if the enumerated type has a symbol defined with a corresponding value of 0, the symbol is returned.</li><li>If we reach this step, “0” is returned.</li></ol></blockquote><blockquote><p>If you prefer, you could define the Actions type without the [Flags] attribute and still get the correct string by using the “F” format.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// [Flags] // Commented out now </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">internal</span> <span class="token keyword">enum</span> <span class="token class-name">Actions</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre> None <span class="token operator">=</span> <span class="token number">0</span> </pre></td></tr><tr><td data-num="4"></td><td><pre> Read <span class="token operator">=</span> <span class="token number">0x0001</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="5"></td><td><pre> Write <span class="token operator">=</span> <span class="token number">0x0002</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="6"></td><td><pre> ReadWrite <span class="token operator">=</span> Actions<span class="token punctuation">.</span>Read <span class="token operator">|</span> Actions<span class="token punctuation">.</span>Write<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="7"></td><td><pre> Delete <span class="token operator">=</span> <span class="token number">0x0004</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="8"></td><td><pre> Query <span class="token operator">=</span> <span class="token number">0x0008</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="9"></td><td><pre> Sync <span class="token operator">=</span> <span class="token number">0x0010</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token class-name">Actions</span> actions <span class="token operator">=</span> Actions<span class="token punctuation">.</span>Read <span class="token operator">|</span> Actions<span class="token punctuation">.</span>Delete<span class="token punctuation">;</span> <span class="token comment">// 0x0005 </span></pre></td></tr><tr><td data-num="13"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>actions<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Read, Delete"</span></pre></td></tr></table></figure><blockquote><p>If the numeric value has a bit that cannot be mapped to a symbol, the returned string will contain just a decimal number indicating the original numeric value; no symbols will appear in the string.</p></blockquote><blockquote><p>Note that the symbols you define in your enumerated type don’t have to be pure powers of 2. For example, the Actions type could define a symbol called All with a value of 0x001F. If an instance of the Actions type has a value of 0x001F, formatting the instance will produce a string that contains “All”. The other symbol strings won’t appear.</p></blockquote><blockquote><p>So far, I’ve discussed how to convert numeric values into a string of flags. It’s also possible to convert a string of comma-delimited symbols into a numeric value by calling Enum’s static Parse and TryParse method. Here’s some code demonstrating how to use this method.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// Because Query is defined as 8, 'a' is initialized to 8. </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Actions</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>Actions<span class="token punctuation">)</span> Enum<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Actions</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Query"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Query" </span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// Because Query and Read are defined, 'a' is initialized to 9. </span></pre></td></tr><tr><td data-num="5"></td><td><pre>Enum<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryParse</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Actions<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Query, Read"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">out</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Read, Query" </span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// Creates an instance of the Actions enum with a value of 28 </span></pre></td></tr><tr><td data-num="8"></td><td><pre>a <span class="token operator">=</span> <span class="token punctuation">(</span>Actions<span class="token punctuation">)</span> Enum<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Actions</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"28"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Delete, Query, Sync"</span></pre></td></tr></table></figure><blockquote><p>When Parse and TryParse are called, the following actions are performed internally:</p><ol><li>It removes all whitespace characters from the start and end of the string.</li><li>If the first character of the string is a digit, plus sign (+), or minus sign (-), the string is assumed to be a number, and an enum instance is returned whose numeric value is equal to the string converted to its numeric equivalent.</li><li>The passed string is split into a set of tokens (separated by commas), and all white space is trimmed away from each token.</li><li>Each token string is looked up in the enum type’s defined symbols. If the symbol is not found, Parse throws a System.ArgumentException and TryParse returns false. If the symbol is found, bitwise-OR its numeric value into a running result, and then look up the next token.</li><li>If all tokens have been sought and found, return the running result.</li></ol></blockquote><blockquote><p>You should never use the IsDefined method with bit flag–enumerated types. It won’t work for two reasons:</p><ul><li>If you pass a string to IsDefined, it doesn’t split the string into separate tokens to look up; it will attempt to look up the string as through it were one big symbol with commas in it. Because you can’t define an enum with a symbol that has commas in it, the symbol will never be found.</li><li>If you pass a numeric value to IsDefined, it checks whether the enumerated type defines a single symbol whose numeric value matches the passed-in number. Because this is unlikely for bit flags, IsDefined will usually return false.</li></ul></blockquote><p>💡小结：调用 <code>System.IO.File</code> 类型的 <code>GetAttributes</code> 方法，会返回 <code>FileAttributes</code> 类型的一个实例。 <code>FileAttributes</code> 类型是基本类型为 Int32 的枚举类型，其中每一位都反映了文件的一个特性（attribute）。经常都要用枚举类型来表示一组可以组合的位标志。虽然枚举类型和位标志相似，但它们的语义不尽相同。例如，枚举类型表示单个数值，而位标志表示位集合，其中一些位处于 on 状态，一些处于 off 状态。强烈建议向枚举类型应用定制特性类型 <code>System.FlagsAttribute</code> 。 <code>ToString</code> 方法检测到类型上存在 [Flags] 特性就不会把数值视为单独的值，而是把它视为一组位标志。 <code>ToString</code> 方法允许以 3 种方式格式化输出：“G”（常规）、“D”（十进制）和 “X”（十六进制）。使用常规格式来格式化枚举类型的实例时，首先会检查类型，看它是否应用了 [Flags] 这个特性。没有应用就查找与该数值匹配的符号并返回符号。如果应用了 [Flags] 特性， <code>ToString</code> 方法会降序排序枚举类型定义的数值集合。每个数值都和枚举实例中的值进行 “按位与” 计算，假如计算结果等于数值，与该数值关联的字符串就会附加到输出字符串上，对应的位会被认为已经考虑过了，会被关闭（设为 0）。这一步不断重复，直到检查完所有数值，或直到枚举实例的所有位都被关闭。检查玩所有数值后，如果枚举实例仍然不为 0，表示枚举实例中一些处于 on 状态的位不对应任何已定义的符号。在这种情况下， <code>ToString</code> 将枚举实例中原始数值作为字符串返回。即如果数值有一个位不能映射到一个符号，返回的字符串只包含一个代表原始数值的十进制数；字符串中不会有符号。永远不要对位标志枚举类型使用 <code>IsDefined</code> 方法。向 <code>IsDefined</code> 方法传递字符串，它不会将这个字符串拆分位单独的 <code>token</code> 来进行查找，而是试图查找整个字符串，把它看成是包含逗号的一个更大的符号。向 <code>IsDefined</code> 方法传递一个数值，它会检查枚举类型是否定义了其数值和传入数值匹配的一个符号。由于位标志不能这样简单地匹配，所以 <code>IsDefined</code> 通常会返回 false。</p><h2 id="adding-methods-to-enumerated-types"><a class="anchor" href="#adding-methods-to-enumerated-types">#</a> Adding Methods to Enumerated Types</h2><blockquote><p>Earlier in this chapter, I mentioned that you cannot define a method as part of an enumerated type. And, for many years, this has saddened me because there are many occasions when I would love to have been able to supply some methods to my enumerated type. Fortunately, I can use C#’s extension method feature (discussed in Chapter 8, “Methods”) to simulate adding methods to an enumerated type.</p></blockquote><blockquote><p>If I want to add some methods to the FileAttributes enumerated type, I can define a static class with extension methods as follows.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">internal</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">FileAttributesExtensionMethods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Boolean</span> <span class="token function">IsSet</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">FileAttributes</span> flags<span class="token punctuation">,</span> <span class="token class-name">FileAttributes</span> flagToTest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token keyword">if</span> <span class="token punctuation">(</span>flagToTest <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentOutOfRangeException</span><span class="token punctuation">(</span><span class="token string">"flagToTest"</span><span class="token punctuation">,</span> <span class="token string">"Value must not be 0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token keyword">return</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> flagToTest<span class="token punctuation">)</span> <span class="token operator">==</span> flagToTest<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Boolean</span> <span class="token function">IsClear</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">FileAttributes</span> flags<span class="token punctuation">,</span> <span class="token class-name">FileAttributes</span> flagToTest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token keyword">if</span> <span class="token punctuation">(</span>flagToTest <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentOutOfRangeException</span><span class="token punctuation">(</span><span class="token string">"flagToTest"</span><span class="token punctuation">,</span> <span class="token string">"Value must not be 0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre> <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">IsSet</span><span class="token punctuation">(</span>flags<span class="token punctuation">,</span> flagToTest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Boolean</span> <span class="token function">AnyFlagsSet</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">FileAttributes</span> flags<span class="token punctuation">,</span> <span class="token class-name">FileAttributes</span> testFlags<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> testFlags<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">FileAttributes</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">FileAttributes</span> flags<span class="token punctuation">,</span> <span class="token class-name">FileAttributes</span> setFlags<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre> <span class="token keyword">return</span> flags <span class="token operator">|</span> setFlags<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">FileAttributes</span> <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">FileAttributes</span> flags<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="19"></td><td><pre> <span class="token class-name">FileAttributes</span> clearFlags<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre> <span class="token keyword">return</span> flags <span class="token operator">&amp;</span> <span class="token operator">~</span>clearFlags<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">FileAttributes</span> flags<span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="23"></td><td><pre> <span class="token class-name">Action<span class="token punctuation">&lt;</span>FileAttributes<span class="token punctuation">></span></span> processFlag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre> <span class="token keyword">if</span> <span class="token punctuation">(</span>processFlag <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">"processFlag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">UInt32</span> bit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> bit <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span> bit <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre> <span class="token class-name">UInt32</span> temp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>UInt32<span class="token punctuation">)</span>flags<span class="token punctuation">)</span> <span class="token operator">&amp;</span> bit<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">processFlag</span><span class="token punctuation">(</span><span class="token punctuation">(</span>FileAttributes<span class="token punctuation">)</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>And here is some code that demonstrates calling some of these methods. As you can see, the code looks as if I’m calling methods on the enumerated type.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">FileAttributes</span> fa <span class="token operator">=</span> FileAttributes<span class="token punctuation">.</span>System<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>fa <span class="token operator">=</span> fa<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>FileAttributes<span class="token punctuation">.</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>fa <span class="token operator">=</span> fa<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span>FileAttributes<span class="token punctuation">.</span>System<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>fa<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span>f <span class="token operator">=></span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>💡小结：可以利用 C# 的扩展方法功能模拟向枚举类型添加方法。</p><div class="tags"><a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag"><i class="ic i-tag"></i> 读书笔记</a> <a href="/tags/C/" rel="tag"><i class="ic i-tag"></i> C#</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2022-11-18 11:29:49" itemprop="dateModified" datetime="2022-11-18T11:29:49+08:00">2022-11-18</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> Donate</button><p>Give me a cup of [coffee]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Sakupinera WeChat Pay"><p>WeChat Pay</p></div><div><img data-src="/images/alipay.png" alt="Sakupinera Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="Sakupinera PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>Sakupinera <i class="ic i-at"><em>@</em></i>Sakupinera</li><li class="link"><strong>Post link: </strong><a href="http://sakupinera.github.io/2022/11/17/csharp/clr-via-csharp/Chapter%2015%20Enumerated%20Types%20and%20Bit%20Flags/" title="CLR via C# - Chapter 15 Enumerated Types and Bit Flags">http://sakupinera.github.io/2022/11/17/csharp/clr-via-csharp/Chapter 15 Enumerated Types and Bit Flags/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/11/16/csharp/clr-via-csharp/Chapter%2014%20Chars,%20Strings,%20and%20Working%20%20with%20Text/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;03&#x2F;08&#x2F;Rft6Y9pgTV5E17J.jpg" title="CLR via C# - Chapter 14 Chars, Strings, and Working with Text"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> CLR-via-CSharp</span><h3>CLR via C# - Chapter 14 Chars, Strings, and Working with Text</h3></a></div><div class="item right"><a href="/2022/11/19/csharp/clr-via-csharp/Chapter%2016%20Arrays/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;03&#x2F;08&#x2F;tNhsmAqoTDncM1b.jpg" title="CLR via C# - Chapter 16 Arrays"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> CLR-via-CSharp</span><h3>CLR via C# - Chapter 16 Arrays</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-15-enumerated-types-and-bit-flags"><span class="toc-number">1.</span> <span class="toc-text">Chapter 15 Enumerated Types and Bit Flags</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#enumerated-types"><span class="toc-number">1.1.</span> <span class="toc-text">Enumerated Types</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bit-flags"><span class="toc-number">1.2.</span> <span class="toc-text">Bit Flags</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#adding-methods-to-enumerated-types"><span class="toc-number">1.3.</span> <span class="toc-text">Adding Methods to Enumerated Types</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%201%20The%20CLR%E2%80%99s%20Execution%20Model/" rel="bookmark" title="CLR via C# - Chapter 1 The CLR’s Execution Model">CLR via C# - Chapter 1 The CLR’s Execution Model</a></li><li><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/" rel="bookmark" title="CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types">CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types</a></li><li><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%203%20Shared%20Assemblies%20and%20Strongly%20Named%20Assemblies/" rel="bookmark" title="CLR via C# - Chapter 3 Shared Assemblies and Strongly Named Assemblies">CLR via C# - Chapter 3 Shared Assemblies and Strongly Named Assemblies</a></li><li><a href="/2022/09/27/csharp/clr-via-csharp/Chapter%204%20Type%20Fundamentals/" rel="bookmark" title="CLR via C# - Chapter 4 Type Fundamentals">CLR via C# - Chapter 4 Type Fundamentals</a></li><li><a href="/2022/10/15/csharp/clr-via-csharp/Chapter%205%20Primitive,%20Reference,%20and%20Value%20%20Types/" rel="bookmark" title="CLR via C# - Chapter 5 Primitive, Reference, and Value Types Fundamentals">CLR via C# - Chapter 5 Primitive, Reference, and Value Types Fundamentals</a></li><li><a href="/2022/10/21/csharp/clr-via-csharp/Chapter%206%20Type%20and%20Member%20Basics/" rel="bookmark" title="CLR via C# - Chapter 6 Type and Member Basics">CLR via C# - Chapter 6 Type and Member Basics</a></li><li><a href="/2022/10/24/csharp/clr-via-csharp/Chapter%207%20Constants%20and%20Fields/" rel="bookmark" title="CLR via C# - Chapter 7 Constants and Fields">CLR via C# - Chapter 7 Constants and Fields</a></li><li><a href="/2022/10/25/csharp/clr-via-csharp/Chapter%208%20Methods/" rel="bookmark" title="CLR via C# - Chapter 8 Methods">CLR via C# - Chapter 8 Methods</a></li><li><a href="/2022/10/27/csharp/clr-via-csharp/Chapter%209%20Parameters/" rel="bookmark" title="CLR via C# - Chapter 9 Parameters">CLR via C# - Chapter 9 Parameters</a></li><li><a href="/2022/10/28/csharp/clr-via-csharp/Chapter%2010%20Properties/" rel="bookmark" title="CLR via C# - Chapter 10 Properties">CLR via C# - Chapter 10 Properties</a></li><li><a href="/2022/10/29/csharp/clr-via-csharp/Chapter%2011%20Events/" rel="bookmark" title="CLR via C# - Chapter 11 Events">CLR via C# - Chapter 11 Events</a></li><li><a href="/2022/11/02/csharp/clr-via-csharp/Chapter%2012%20Generics/" rel="bookmark" title="CLR via C# - Chapter 12 Generics">CLR via C# - Chapter 12 Generics</a></li><li><a href="/2022/11/04/csharp/clr-via-csharp/Chapter%2013%20Interfaces/" rel="bookmark" title="CLR via C# - Chapter 13 Interfaces">CLR via C# - Chapter 13 Interfaces</a></li><li><a href="/2022/11/16/csharp/clr-via-csharp/Chapter%2014%20Chars,%20Strings,%20and%20Working%20%20with%20Text/" rel="bookmark" title="CLR via C# - Chapter 14 Chars, Strings, and Working with Text">CLR via C# - Chapter 14 Chars, Strings, and Working with Text</a></li><li class="active"><a href="/2022/11/17/csharp/clr-via-csharp/Chapter%2015%20Enumerated%20Types%20and%20Bit%20Flags/" rel="bookmark" title="CLR via C# - Chapter 15 Enumerated Types and Bit Flags">CLR via C# - Chapter 15 Enumerated Types and Bit Flags</a></li><li><a href="/2022/11/19/csharp/clr-via-csharp/Chapter%2016%20Arrays/" rel="bookmark" title="CLR via C# - Chapter 16 Arrays">CLR via C# - Chapter 16 Arrays</a></li><li><a href="/2022/11/21/csharp/clr-via-csharp/Chapter%2017%20Delegates/" rel="bookmark" title="CLR via C# - Chapter 17 Delegates">CLR via C# - Chapter 17 Delegates</a></li><li><a href="/2022/11/22/csharp/clr-via-csharp/Chapter%2018%20Custom%20Attributes/" rel="bookmark" title="CLR via C# - Chapter 18 Custom Attributes">CLR via C# - Chapter 18 Custom Attributes</a></li><li><a href="/2022/11/23/csharp/clr-via-csharp/Chapter%2019%20Nullable%20Value%20Types/" rel="bookmark" title="CLR via C# - Chapter 19 Nullable Value Types">CLR via C# - Chapter 19 Nullable Value Types</a></li><li><a href="/2022/11/25/csharp/clr-via-csharp/Chapter%2020%20Exceptions%20and%20State%20Management/" rel="bookmark" title="CLR via C# - Chapter 20 Exceptions and State Management">CLR via C# - Chapter 20 Exceptions and State Management</a></li><li><a href="/2022/11/27/csharp/clr-via-csharp/Chapter%2021%20The%20Managed%20Heap%20and%20Garbage%20%20Collection/" rel="bookmark" title="CLR via C# - Chapter 21 The Managed Heap and Garbage  Collection">CLR via C# - Chapter 21 The Managed Heap and Garbage Collection</a></li><li><a href="/2022/11/28/csharp/clr-via-csharp/Chapter%2022%20CLR%20Hosting%20and%20AppDomains/" rel="bookmark" title="CLR via C# - Chapter 22 CLR Hosting and AppDomains">CLR via C# - Chapter 22 CLR Hosting and AppDomains</a></li><li><a href="/2022/11/29/csharp/clr-via-csharp/Chapter%2023%20Assembly%20Loading%20and%20Reflection/" rel="bookmark" title="CLR via C# - Chapter 23 Assembly Loading and Reflection">CLR via C# - Chapter 23 Assembly Loading and Reflection</a></li><li><a href="/2022/11/30/csharp/clr-via-csharp/Chapter%2024%20Runtime%20Serialization/" rel="bookmark" title="CLR via C# - Chapter 24 Runtime Serialization">CLR via C# - Chapter 24 Runtime Serialization</a></li><li><a href="/2022/12/06/csharp/clr-via-csharp/Chapter%2025%20Interoperating%20with%20WinRT%20%20Components/" rel="bookmark" title="CLR via C# - Chapter 25 Interoperating with WinRT Components">CLR via C# - Chapter 25 Interoperating with WinRT Components</a></li><li><a href="/2023/02/06/csharp/clr-via-csharp/Chapter%2026%20Thread%20Basics/" rel="bookmark" title="CLR via C# - Chapter 26 Thread Basics">CLR via C# - Chapter 26 Thread Basics</a></li><li><a href="/2023/02/07/csharp/clr-via-csharp/Chapter%2027%20Compute-Bound%20Asynchronous%20Operations/" rel="bookmark" title="CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations">CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations</a></li><li><a href="/2023/02/08/csharp/clr-via-csharp/Chapter%2028%20IO-Bound%20Asynchronous%20Operations/" rel="bookmark" title="CLR via C# - Chapter 28 IO-Bound Asynchronous Operations">CLR via C# - Chapter 28 IO-Bound Asynchronous Operations</a></li><li><a href="/2023/02/09/csharp/clr-via-csharp/Chapter%2029%20Primitive%20Thread%20Synchronization%20Constructs/" rel="bookmark" title="CLR via C# - Chapter 29 Primitive Thread Synchronization">CLR via C# - Chapter 29 Primitive Thread Synchronization</a></li><li><a href="/2023/02/10/csharp/clr-via-csharp/Chapter%2030%20Hybrid%20Thread%20Synchronization%20Constructs/" rel="bookmark" title="CLR via C# - Chapter 30 Hybrid Thread Synchronization">CLR via C# - Chapter 30 Hybrid Thread Synchronization</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Sakupinera" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Sakupinera</p><div class="description" itemprop="description">保持你的决心！</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">86</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">13</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">6</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Nha3VwaW5lcmE=" title="https:&#x2F;&#x2F;github.com&#x2F;sakupinera"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9zYWt1cGluZXJh" title="https:&#x2F;&#x2F;twitter.com&#x2F;sakupinera"><i class="ic i-twitter"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQwNzIyOTA3MQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;407229071"><i class="ic i-cloud-music"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMjIzMDczOTg/c3BtX2lkX2Zyb209MzMzLjEwMDcuMC4w" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;22307398?spm_id_from&#x3D;333.1007.0.0"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/games/" rel="section"><i class="ic i-flag"></i>Games</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-person"></i>About</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/11/16/csharp/clr-via-csharp/Chapter%2014%20Chars,%20Strings,%20and%20Working%20%20with%20Text/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/11/19/csharp/clr-via-csharp/Chapter%2016%20Arrays/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Computer-Graphics/" title="In Computer-Graphics">Computer-Graphics</a> <i class="ic i-angle-right"></i> <a href="/categories/Computer-Graphics/GAMES101/" title="In GAMES101">GAMES101</a></div><span><a href="/2022/09/30/computer-graphics/games101/%E7%9D%80%E8%89%B2/" title="GAMES101 - Shading（着色）">GAMES101 - Shading（着色）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2023/02/07/csharp/clr-via-csharp/Chapter%2027%20Compute-Bound%20Asynchronous%20Operations/" title="CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations">CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/11/04/csharp/clr-via-csharp/Chapter%2013%20Interfaces/" title="CLR via C# - Chapter 13 Interfaces">CLR via C# - Chapter 13 Interfaces</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Computer-Graphics/" title="In Computer-Graphics">Computer-Graphics</a> <i class="ic i-angle-right"></i> <a href="/categories/Computer-Graphics/GAMES101/" title="In GAMES101">GAMES101</a></div><span><a href="/2022/10/31/computer-graphics/games101/%E7%9B%B8%E6%9C%BA%EF%BC%8C%E9%80%8F%E9%95%9C%E5%92%8C%E5%85%89%E5%9C%BA/" title="GAMES101 - Cameras, Lenses and Light Fields（相机，透镜和光场）">GAMES101 - Cameras, Lenses and Light Fields（相机，透镜和光场）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/09/27/csharp/clr-via-csharp/Chapter%204%20Type%20Fundamentals/" title="CLR via C# - Chapter 4 Type Fundamentals">CLR via C# - Chapter 4 Type Fundamentals</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/11/16/csharp/clr-via-csharp/Chapter%2014%20Chars,%20Strings,%20and%20Working%20%20with%20Text/" title="CLR via C# - Chapter 14 Chars, Strings, and Working with Text">CLR via C# - Chapter 14 Chars, Strings, and Working with Text</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CSharp-in-a-Nutshell/" title="In CSharp-in-a-Nutshell">CSharp-in-a-Nutshell</a></div><span><a href="/2022/08/29/csharp/csharp-in-a-nutshell/%E7%AC%AC2%E7%AB%A0%20%E5%9C%A8CSharp%E4%B8%AD%E5%88%9B%E5%BB%BA%E7%B1%BB%E5%9E%8B/" title="C# in a Nutshell - 第2章 C#语言基础">C# in a Nutshell - 第2章 C#语言基础</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CSharp-in-a-Nutshell/" title="In CSharp-in-a-Nutshell">CSharp-in-a-Nutshell</a></div><span><a href="/2022/08/29/csharp/csharp-in-a-nutshell/%E7%AC%AC4%E7%AB%A0%20CSharp%E7%9A%84%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/" title="C# in a Nutshell - 第4章 C#的高级特性">C# in a Nutshell - 第4章 C#的高级特性</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/11/21/csharp/clr-via-csharp/Chapter%2017%20Delegates/" title="CLR via C# - Chapter 17 Delegates">CLR via C# - Chapter 17 Delegates</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Cpp/" title="In Cpp">Cpp</a> <i class="ic i-angle-right"></i> <a href="/categories/Cpp/Cpp-Primer/" title="In Cpp-Primer">Cpp-Primer</a></div><span><a href="/2023/01/03/cpp/cpp-primer/Chapter%2011%20Associative%20Containers/" title="C++ Primer - Chapter 11 Associative Containers">C++ Primer - Chapter 11 Associative Containers</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Sakupinera @ Hanamai Sora</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">2.2m words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">33:30</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/11/17/csharp/clr-via-csharp/Chapter 15 Enumerated Types and Bit Flags/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/assets/shifuku.model.json"},display:{position:"left",width:250,height:500},mobile:{show:!1},react:{opacity:.9},log:!1})</script></body></html>