<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Sakupinera" href="http://sakupinera.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Sakupinera" href="http://sakupinera.github.io/atom.xml"><link rel="alternate" type="application/json" title="Sakupinera" href="http://sakupinera.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="è¯»ä¹¦ç¬”è®°,C#"><link rel="canonical" href="http://sakupinera.github.io/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/"><title>CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types - CLR-via-CSharp - CSharp | Hanamai Sora = Sakupinera</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types</h1><div class="meta"><span class="item" title="Created: 2022-08-28 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2022-08-28T00:00:00+08:00">2022-08-28</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>32k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>29 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Hanamai Sora</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicm0n457cj20zk0m8e81.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipey0a334j20zk0m8qpt.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclh0m9pdj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclxp31goj20zk0m8qv5.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclg5ms2rj20zk0m8u0x.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/CSharp/" itemprop="item" rel="index" title="In CSharp"><span itemprop="name">CSharp</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/CSharp/CLR-via-CSharp/" itemprop="item" rel="index" title="In CLR-via-CSharp"><span itemprop="name">CLR-via-CSharp</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="http://sakupinera.github.io/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Sakupinera"><meta itemprop="description" content=", ä¿æŒä½ çš„å†³å¿ƒï¼"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sakupinera"></span><div class="body md" itemprop="articleBody"><h1 id="chapter-2-building-packaging-deploying-and-administering-applications-and-types"><a class="anchor" href="#chapter-2-building-packaging-deploying-and-administering-applications-and-types">#</a> Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types</h1><blockquote><p>Today, applications consist of several types, which are typically created by you and Microsoft. In addition, there are many component vendors creating and selling types that other companies can use to reduce a software projectâ€™s development time. If these types are developed using any language that targets the common language runtime (CLR), they can all work together seamlessly; a type written in one language can use another type as its base class without concern for the language the base type was developed in.</p></blockquote><h2 id="net-framework-deployment-goals"><a class="anchor" href="#net-framework-deployment-goals">#</a> <strong>.NET Framework Deployment Goals</strong></h2><blockquote><p>Over the years, Windows has gotten a reputation for being unstable and complicated. This reputation, whether deserved or not, is the result of many different factors. First, all applications use dynamic-link libraries (DLLs) from Microsoft or other vendors.</p></blockquote><blockquote><p>Iâ€™m sure that everyone reading this book has experienced some variation of this problem: when installing a new application, you discover that it has somehow corrupted an already-installed application. This predicament is known as â€œDLL hell.â€ This type of instability puts fear into the hearts and minds of the typical computer user. The end result is that users have to carefully consider whether to install new software on their machines. Personally, Iâ€™ve decided not to try out certain applications out of fear that it might adversely affect some application I really rely on.</p></blockquote><blockquote><p>The second reason that contributed to the aforementioned reputation of Windows is installation complexities. Today, when most applications are installed, they affect all parts of the system. For example, installing an application causes files to be copied to various directories, updates registry settings, and installs shortcuts on your desktop and Start menu/screen. The problem with this is that the application isnâ€™t isolated as a single entity. You canâ€™t easily back up the application because you must copy the applicationâ€™s files and also the relevant parts of the registry. In addition, you canâ€™t easily move the application from one machine to another; you must run the installation program again so that all files and registry settings are set properly. Finally, you canâ€™t easily uninstall or remove the application without having this nasty feeling that some part of the application is still lurking on your machine.</p></blockquote><blockquote><p>The third reason has to do with security. When applications are installed, they come with all kinds of files, many of them written by different companies. In addition, web applications frequently have code (like ActiveX controls) that is downloaded in such a way that users donâ€™t even realize that code is being installed on their machine. Today, this code can perform any operation, including deleting files or sending email. Users are right to be terrified of installing new applications because of the potential damage they can cause. To make users comfortable, security must be built into the system so that the users can explicitly allow or disallow code developed by various companies to access their systemâ€™s resources.</p></blockquote><blockquote><p>The .NET Framework addresses the DLL hell issue in a big way, as youâ€™ll see while reading this chapter and Chapter 3. It also goes a long way toward fixing the problem of having an applicationâ€™s state scattered all over a userâ€™s hard disk. For example, unlike COM, types no longer require settings in the registry. Unfortunately, applications still require shortcut links. As for security, the .NET Framework CHAPTER 2 Building, Packaging, Deploying, and Administering Applications and Types 35 includes a security model called code access security. Whereas Windows security is based on a userâ€™s identity, code access security allows hosts to set permissions, thereby controlling what the loaded components can do. A host application like Microsoft SQL Server can grant just a few permissions to code, whereas a locally installed (self-hosting) application could run with full trust (all permissions). As youâ€™ll see, the .NET Framework enables users to control what gets installed and what runs, and in general, to control their machines, more than Windows ever did.</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šåœ¨ Windows ä¸‹ï¼Œåº”ç”¨ç¨‹åºéƒ½ä½¿ç”¨æ¥è‡ª Microsoft æˆ–å…¶ä»–å‚å•†çš„åŠ¨æ€é“¾æ¥åº“ï¼ˆDynamic-Link Library, DLLï¼‰ã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œå½“å®ƒä»¬æ›´æ–°å®‰è£…çš„è½¯ä»¶æ—¶ï¼Œå¹¶ä¸èƒ½ä¿è¯æ–°å®‰è£…çš„æ–‡ä»¶ä¸€å®šå‘åå…¼å®¹ä»¥å‰çš„æ–‡ä»¶ã€‚å¾ˆå¤šäººéƒ½å¯èƒ½é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼šå®‰è£…æ–°åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒå¯èƒ½è«åå…¶å¦™ç ´åäº†å¦ä¸€ä¸ªå·²ç»å®‰è£…å¥½çš„åº”ç”¨ç¨‹åºï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ â€œDLL hellâ€ã€‚é€ æˆ Windows å£ç¢‘ä¸ä½³çš„ç¬¬äºŒä¸ªåŸå› æ˜¯å®‰è£…çš„å¤æ‚æ€§ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºåœ¨å®‰è£…æ—¶éƒ½ä¼šå½±å“åˆ°ç³»ç»Ÿçš„å…¨éƒ¨ç»„ä»¶ã€‚åº”ç”¨ç¨‹åºä¸æ˜¯ä¸€ä¸ªå­¤ç«‹çš„å®ä½“ï¼Œåº”ç”¨ç¨‹åºå¤‡ä»½ä¸æ˜“ï¼Œå› ä¸ºå¿…é¡»å¤åˆ¶åº”ç”¨ç¨‹åºçš„å…¨éƒ¨æ–‡ä»¶ä»¥åŠæ³¨å†Œè¡¨ä¸­çš„ç›¸å…³éƒ¨åˆ†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿä¸èƒ½è½»æ¾åœ°å°†åº”ç”¨ç¨‹åºä»ä¸€å°æœºå™¨ç§»åŠ¨åˆ°å¦ä¸€å°æœºå™¨ï¼Œåªæœ‰å†æ¬¡è¿è¡Œå®‰è£…ç¨‹åºæ‰èƒ½ç¡®ä¿æ‰€æœ‰æ–‡ä»¶å’Œæ³¨å†Œè¡¨è®¾ç½®çš„æ­£ç¡®æ€§ã€‚æœ€åï¼Œå³ä½¿å¸è½½æˆ–ç§»é™¤äº†åº”ç”¨ç¨‹åºï¼Œä¹Ÿå…ä¸äº†æ‹…å¿ƒå®ƒçš„ä¸€éƒ¨åˆ†å†…å®¹ä»æ½œä¼åœ¨æˆ‘ä»¬çš„æœºå™¨ä¸­ã€‚ç¬¬ä¸‰ä¸ªåŸå› æ¶‰åŠå®‰å…¨æ€§ã€‚åº”ç”¨ç¨‹åºå®‰è£…æ—¶ä¼šå¸¦æ¥å„ç§æ–‡ä»¶ï¼Œå…¶ä¸­è®¸å¤šæ˜¯ä¸åŒçš„å…¬å¸å¼€å‘çš„ã€‚æ­¤å¤–ï¼ŒWeb åº”ç”¨ç¨‹åºç»å¸¸ä¼šæ‚„æ‚„ä¸‹è½½ä¸€äº›ä»£ç ï¼Œè€Œè¿™äº›ä»£ç èƒ½å¤Ÿæ‰§è¡Œä»»ä½•æ“ä½œï¼ŒåŒ…æ‹¬åˆ é™¤æ–‡ä»¶æˆ–è€…å‘é€ç”µå­é‚®ä»¶ã€‚<span class="exturl" data-url="aHR0cDovL3huLS02dzBhLk5FVA==">è€Œ.NET</span> Framework æ­£åœ¨å°è¯•å½»åº•è§£å†³ DLL hell é—®é¢˜ï¼Œå¦å¤–ï¼Œ.NET Framework è¿˜åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†åº”ç”¨ç¨‹åºçŠ¶æ€åœ¨ç”¨æˆ·ç¡¬ç›˜ä¸­å››å¤„åˆ†æ•£çš„é—®é¢˜ã€‚å®‰å…¨æ€§æ–¹é¢ï¼Œ.NET Framework åŒ…å«ç§°ä¸º â€œä»£ç è®¿é—®å®‰å…¨æ€§â€ï¼ˆCode Access Securityï¼‰çš„å®‰å…¨æ¨¡å‹ã€‚Windows å®‰å…¨æ€§åŸºäºç”¨æˆ·èº«ä»½ï¼Œè€Œä»£ç è®¿é—®å®‰å…¨æ€§å…è®¸å®¿ä¸»è®¾ç½®æƒé™ï¼Œæ§åˆ¶åŠ è½½çš„ç»„ä»¶èƒ½åšçš„äº‹æƒ…ã€‚.NET Framework å…è®¸ç”¨æˆ·çµæ´»åœ°æ§åˆ¶å“ªäº›ä¸œè¥¿èƒ½å¤Ÿå®‰è£…ï¼Œå“ªäº›ä¸œè¥¿èƒ½å¤Ÿè¿è¡Œã€‚</p><h2 id="building-types-into-a-module"><a class="anchor" href="#building-types-into-a-module">#</a> <strong>Building Types into a Module</strong></h2><blockquote><p>In this section, Iâ€™ll show you how to turn your source file, containing various types, into a file that can be deployed. Letâ€™s start by examining the following simple application.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> System<span class="token punctuation">.</span>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>To build this sample application, put the preceding code into a source code file, say, Program.cs, and then execute the following command line.</p></blockquote><pre><code>csc.exe /out:Program.exe /t:exe /r:MSCorLib.dll Program.cs
</code></pre><blockquote><p>This command line tells the C# compiler to emit an executable file called Program.exe ( <code>/out:Program.exe</code> ). The type of file produced is a Win32 console application ( <code>/t[arget]:exe</code> ).</p></blockquote><blockquote><p>When the C# compiler processes the source file, it sees that the code references the <code>System.Console</code> typeâ€™s WriteLine method. At this point, the compiler wants to ensure that this type exists somewhere, that it has a WriteLine method, and that the argument being passed to this method matches the parameter the method expects. Because this type is not defined in the C# source code, to make the C# compiler happy, you must give it a set of assemblies that it can use to resolve references to external types. In the preceding command line, Iâ€™ve included the <code>/r[eference]:MSCorLib.dll</code> switch, which tells the compiler to look for external types in the assembly identified by the MSCorLib.dll file.</p></blockquote><blockquote><p>MSCorLib.dll is a special file in that it contains all the core types: Byte, Char, String, Int32, and many more. In fact, these types are so frequently used that the C# compiler automatically references the MSCorLib.dll assembly. In other words, the following command line (with the /r switch omitted) gives the same results as the line shown earlier.</p><p><code>csc.exe /out:Program.exe /t:exe Program.cs</code></p></blockquote><blockquote><p>If, for some reason, you really donâ€™t want the C# compiler to reference the MSCorLib.dll assembly, you can use the <code>/nostdlib</code> switch. Microsoft uses this switch when building the MSCorLib.dll assembly itself. For example, the following command line will generate an error when CSC.exe attempts to compile the <code>Program.cs</code> file because the <code>System.Console</code> type is defined in MSCorLib.dll.</p><p><code>csc.exe /out:Program.exe /t:exe /nostdlib Program.cs</code></p></blockquote><p><strong>Response Files</strong></p><blockquote><p>Before leaving the discussion about compiler switches, Iâ€™d like to spend a moment talking about response files. A response file is a text file that contains a set of compiler command-line switches. When you execute CSC.exe, the compiler opens response files and uses any switches that are specified in them as though the switches were passed to CSC.exe on the command line. You instruct the compiler to use a response file by specifying its name on the command line prepended by an @ sign. For example, you could have a response file called <code>MyProject.rsp</code> that contains the following text.</p></blockquote><pre><code>/out:MyProject.exe
/target:winexe
</code></pre><blockquote><p>To cause CSC.exe to use these settings, youâ€™d invoke it as follows.</p></blockquote><pre><code>csc.exe @MyProject.rsp CodeFile1.cs CodeFile2.cs
</code></pre><blockquote><p>The C# compiler supports multiple response files. In addition to the files you explicitly specify on the command line, the compiler automatically looks for files called CSC.rsp. When you run CSC.exe, it looks in the directory containing the CSC.exe file for a global CSC.rsp file. Settings that you want applied to all of your projects should go in this file. The compiler aggregates and uses the settings in all of these response files. If you have conflicting settings in the local and global response files, the settings in the local file override the settings in the global file. Likewise, any settings explicitly passed on the command line override the settings taken from a local response file.</p></blockquote><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled.png" alt="Untitled"></p><blockquote><p>Referencing all of these assemblies could slow the compiler down a bit. But if your source code doesnâ€™t refer to a type or member defined by any of these assemblies, there is no impact to the resulting assembly file, nor to run-time execution performance.</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šå°†ç±»å‹ç”Ÿæˆåˆ°æ¨¡å—ä¸­å¯ä»¥ä½¿ç”¨ csc.exe å‘½ä»¤ï¼Œ/out: æ–‡ä»¶å æŒ‡å®šç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶æ–‡ä»¶åï¼Œ/t: ç±»å‹ æŒ‡å®šåº”ç”¨ç¨‹åºçš„ç±»å‹ã€‚Windwos æ”¯æŒä¸‰ç§åº”ç”¨ç¨‹åºï¼Œæ§åˆ¶å°ç”¨æˆ·ç•Œé¢ï¼ˆConsole User Interfaceï¼ŒCUIï¼‰åº”ç”¨ç¨‹åºä½¿ç”¨ /t:exe å¼€å…³ï¼›å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGraphical User Interfaceï¼ŒGUIï¼‰åº”ç”¨ç¨‹åºä½¿ç”¨ /t:winexe å¼€å…³ï¼›Windows Store åº”ç”¨ä½¿ç”¨ /t:appcontainerexe å¼€å…³ã€‚/r: å¼•ç”¨ç¨‹åºé›† å‘Šè¯‰ç¼–è¯‘å™¨åœ¨æŒ‡å®šç¨‹åºé›†ä¸­æŸ¥æ‰¾å¤–éƒ¨ç±»å‹ã€‚C# ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¼•ç”¨ MSCorLib.dll ç¨‹åºé›†ï¼Œè‹¥ä¸æƒ³è‡ªåŠ¨å¼•ç”¨ MSCorLib.dll ç¨‹åºé›†ï¼Œå¯ä»¥ä½¿ç”¨ /nostdlib å¼€å…³ã€‚å“åº”æ–‡ä»¶æ—¶åŒ…å«ä¸€ç»„ç¼–è¯‘å™¨å‘½ä»¤è¡Œå¼€å…³çš„æ–‡æœ¬æ–‡ä»¶ã€‚æ‰§è¡Œ CSC.exe æ—¶ï¼Œç¼–è¯‘å™¨æ‰“å¼€å“åº”æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨å…¶ä¸­åŒ…å«çš„æ‰€æœ‰å¼€å…³ï¼Œæ„Ÿè§‰å°±åƒæ˜¯è¿™äº›å¼€å…³ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸Šä¼ é€’ç»™ CSC.exeã€‚C# ç¼–è¯‘å™¨æ”¯æŒå¤šä¸ªå“åº”æ–‡ä»¶ï¼Œé™¤äº†å‘½ä»¤è¡Œä¸Šæ˜¾å¼æŒ‡å®šçš„æ–‡ä»¶ï¼Œç¼–è¯‘å™¨è¿˜ä¼šè‡ªåŠ¨æŸ¥æ‰¾åä¸º CSC.rsp æ–‡ä»¶ã€‚CSC.exe è¿è¡Œæ—¶ï¼Œä¼šåœ¨ CSC.exe æ‰€åœ¨ç›®å½•æŸ¥æ‰¾å…¨å±€ CSC.rsp æ–‡ä»¶ã€‚æœ¬åœ°å’Œå…¨å±€å“åº”æ–‡ä»¶ä¸­çš„æŸä¸ªè®¾ç½®å‘ç”Ÿå†²çªï¼Œå°†ä»¥æœ¬åœ°è®¾ç½®ä¸ºå‡†ã€‚ç±»ä¼¼åœ°ï¼Œå‘½ä»¤ä¸Šæ˜¾å¼æŒ‡å®šçš„è®¾ç½®å°†è¦†ç›–æœ¬åœ°å“åº”æ–‡ä»¶ä¸­çš„è®¾ç½®ã€‚å¼•ç”¨æ‰€æœ‰è¿™äº›ç¨‹åºé›†å¯¹ç¼–è¯‘å™¨çš„é€Ÿåº¦æœ‰ä¸€ç‚¹å½±å“ã€‚ä½†æ˜¯ï¼Œå¦‚æœæºä»£ç æ²¡æœ‰å¼•ç”¨ä¸Šè¿°ä»»ä½•ç¨‹åºé›†å®šä¹‰çš„ç±»å‹æˆ–æˆå‘˜ï¼Œå°±ä¸ä¼šå½±å“æœ€ç»ˆçš„ç¨‹åºé›†æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šå½±å“ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½ã€‚å¦å¤–ï¼ŒæŒ‡å®š /noconfig å‘½ä»¤è¡Œå¼€å…³ï¼Œç¼–è¯‘å™¨å°†å¿½ç•¥æœ¬åœ°å’Œå…¨å±€ CSC.rsp æ–‡ä»¶ã€‚</p><h2 id="a-brief-look-at-metadata"><a class="anchor" href="#a-brief-look-at-metadata">#</a> <strong>A Brief Look at Metadata</strong></h2><blockquote><p>Now we know what kind of PE file weâ€™ve created. But what exactly is in the Program.exe file? A managed PE file has four main parts: the PE32(+) header, the CLR header, the metadata, and the IL. The PE32(+) header is the standard information that Windows expects. The CLR header is a small block of information that is specific to modules that require the CLR (managed modules). The header includes the major and minor version number of the CLR that the module was built for: some flags, a MethodDef token (described later) indicating the moduleâ€™s entry point method if this module is a CUI, GUI, or Windows Store executable, and an optional strong-name digital signature (discussed in Chapter 3). Finally, the header contains the size and offsets of certain metadata tables contained within the module. You can see the exact format of the CLR header by examining the IMAGE_COR20_HEADER defined in the CorHdr.h header file.</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">IMAGE_COR20_HEADER</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// Header versioning</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    DWORD                   cb<span class="token punctuation">;</span>              </pre></td></tr><tr><td data-num="5"></td><td><pre>    WORD                    MajorRuntimeVersion<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    WORD                    MinorRuntimeVersion<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// Symbol table and startup information</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    IMAGE_DATA_DIRECTORY    MetaData<span class="token punctuation">;</span>        </pre></td></tr><tr><td data-num="10"></td><td><pre>    DWORD                   Flags<span class="token punctuation">;</span>           </pre></td></tr><tr><td data-num="11"></td><td><pre>  </pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token comment">// The main program if it is an EXE (not used if a DLL?)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// If COMIMAGE_FLAGS_NATIVE_ENTRYPOINT is not set, EntryPointToken represents a managed entrypoint.</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token comment">// If COMIMAGE_FLAGS_NATIVE_ENTRYPOINT is set, EntryPointRVA represents an RVA to a native entrypoint</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token comment">// (depricated for DLLs, use modules constructors intead). </span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">union</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        DWORD               EntryPointToken<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        DWORD               EntryPointRVA<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    </pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// This is the blob of managed resources. Fetched using code:AssemblyNative.GetResource and</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// code:PEFile.GetResource and accessible from managed code from</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token comment">// System.Assembly.GetManifestResourceStream.  The meta data has a table that maps names to offsets into</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token comment">// this blob, so logically the blob is a set of resources. </span></pre></td></tr><tr><td data-num="25"></td><td><pre>    IMAGE_DATA_DIRECTORY    Resources<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token comment">// IL assemblies can be signed with a public-private key to validate who created it.  The signature goes</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token comment">// here if this feature is used. </span></pre></td></tr><tr><td data-num="28"></td><td><pre>    IMAGE_DATA_DIRECTORY    StrongNameSignature<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    IMAGE_DATA_DIRECTORY    CodeManagerTable<span class="token punctuation">;</span>			<span class="token comment">// Depricated, not used </span></pre></td></tr><tr><td data-num="31"></td><td><pre>	<span class="token comment">// Used for manged codee that has unmaanaged code inside it (or exports methods as unmanaged entry points)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    IMAGE_DATA_DIRECTORY    VTableFixups<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    IMAGE_DATA_DIRECTORY    ExportAddressTableJumps<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token comment">// null for ordinary IL images.  NGEN images it points at a code:CORCOMPILE_HEADER structure</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    IMAGE_DATA_DIRECTORY    ManagedNativeHeader<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    </pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span> IMAGE_COR20_HEADER<span class="token punctuation">,</span> <span class="token operator">*</span>PIMAGE_COR20_HEADER<span class="token punctuation">;</span></pre></td></tr></table></figure><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled1.png" alt="Untitled"></p><blockquote><p>The metadata is a block of binary data that consists of several tables. There are three categories of tables: definition tables, reference tables, and manifest tables.</p></blockquote><blockquote><p>As the compiler compiles your source code, everything your code defines causes an entry to be created in one of the tables described in Table 2-1. Metadata table entries are also created as the compiler detects the types, fields, methods, properties, and events that the source code references. The metadata created includes a set of reference tables that keep a record of the referenced items.</p></blockquote><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled2.png" alt="Untitled"></p><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled3.png" alt="Untitled"></p><p>ğŸ’¡ å°ç»“ï¼šæ‰˜ç®¡ PE æ–‡ä»¶ç”± 4 éƒ¨åˆ†æ„æˆï¼šPE32 (+) å¤´ã€CLR å¤´ã€å…ƒæ•°æ®ä»¥åŠ ILã€‚PE32 (+) å¤´æ˜¯ Windows è¦æ±‚çš„æ ‡å‡†ä¿¡æ¯ã€‚CLR å¤´æ˜¯ä¸€ä¸ªå°çš„ä¿¡æ¯å—ï¼Œæ˜¯éœ€è¦ CLR çš„æ¨¡å—ï¼ˆæ‰˜ç®¡æ¨¡å—ï¼‰ç‰¹æœ‰çš„ã€‚è¿™ä¸ªå¤´åŒ…å«æ¨¡å—ç”Ÿæˆæ—¶æ‰€é¢å‘çš„ CLR çš„ major (ä¸») å’Œ minor (æ¬¡) ç‰ˆæœ¬å·ï¼›ä¸€äº›æ ‡å¿—ï¼ˆflagï¼‰ï¼›ä¸€ä¸ª MethodDef tokenï¼Œè¯¥ token æŒ‡å®šäº†æ¨¡å—çš„å…¥å£æ–¹æ³•ï¼ˆå‰ææ˜¯è¯¥æ¨¡å—æ˜¯ CUIã€GUI æˆ– Windows Store æ‰§è¡Œä½“ï¼‰ï¼›ä¸€ä¸ªå¯é€‰çš„å¼ºåç§°æ•°å­—ç­¾åã€‚æœ€åï¼ŒCLR å¤´è¿˜åŒ…å«æ¨¡å—å†…éƒ¨çš„ä¸€äº›å…ƒæ•°æ®è¡¨çš„å¤§å°å’Œåç§»é‡ã€‚å¯ä»¥æŸ¥çœ‹ CorHdr.h å¤´æ–‡ä»¶å®šä¹‰çš„ IMAGE_COR20_HEADER æ¥äº†è§£ CLR å¤´çš„å…·ä½“æ ¼å¼ã€‚å…ƒæ•°æ®æ˜¯ç”±å‡ ä¸ªè¡¨æ„æˆçš„äºŒè¿›åˆ¶æ•°æ®å—ã€‚æœ‰ 3 ç§è¡¨ï¼Œåˆ†åˆ«æ˜¯å®šä¹‰è¡¨ï¼ˆdefinition tableï¼‰ã€å¼•ç”¨è¡¨ï¼ˆreference tableï¼‰å’Œæ¸…å•è¡¨ï¼ˆmanifest tableï¼‰ã€‚ç¼–è¯‘å™¨ç¼–è¯‘æºä»£ç æ—¶ï¼Œdiamagnetic å®šä¹‰çš„ä»»ä½•éƒ½ç³»éƒ½ä¼šåœ¨å…ƒæ•°æ®å®šä¹‰è¡¨ä¸­åˆ›å»ºä¸€ä¸ªè®°å½•é¡¹ã€‚æ­¤å¤–ï¼Œç¼–è¯‘å™¨è¿˜ä¼šæ£€æµ‹æºä»£ç å¼•ç”¨çš„ç±»å‹ã€å­—æ®µã€æ–¹æ³•ã€å±æ€§å’Œäº‹ä»¶ï¼Œå¹¶åˆ›å»ºç›¸åº”çš„å…ƒæ•°æ®è®°å½•é¡¹ã€‚åœ¨åˆ›å»ºçš„å…ƒæ•°æ®ä¸­åŒ…å«ä¸€ç»„å¼•ç”¨è¡¨ï¼Œå®ƒä»¬è®°å½•äº†æ‰€å¼•ç”¨çš„å†…å®¹ã€‚</p><h2 id="combining-modules-to-form-an-assembly"><a class="anchor" href="#combining-modules-to-form-an-assembly">#</a> <strong>Combining Modules to Form an Assembly</strong></h2><blockquote><p>The Program.exe file discussed in the previous section is more than just a PE file with metadata; it is also an assembly. An assembly is a collection of one or more files containing type definitions and resource files. One of the assemblyâ€™s files is chosen to hold a manifest. The manifest is another set of metadata tables that basically contain the names of the files that are part of the assembly. They also describe the assemblyâ€™s version, culture, publisher, publicly exported types, and all of the files that comprise the assembly.</p></blockquote><blockquote><p>The CLR operates on assemblies; that is, the CLR always loads the file that contains the manifest metadata tables first and then uses the manifest to get the names of the other files that are in the assembly. Here are some characteristics of assemblies that you should remember:</p><p>â–  An assembly defines the reusable types.</p><p>â–  An assembly is marked with a version number.</p><p>â–  An assembly can have security information associated with it.</p></blockquote><blockquote><p>An assemblyâ€™s individual files donâ€™t have these attributesâ€”except for the file that contains the manifest metadata tables.</p></blockquote><blockquote><p>To package, version, secure, and use types, you must place them in modules that are part of an assembly. In most cases, an assembly consists of a single file, as the preceding Program.exe example does. However, an assembly can also consist of multiple files: some PE files with metadata and some resource files such as .gif or .jpg files. It might help you to think of an assembly as a logical EXE or a DLL.</p></blockquote><blockquote><p>An assembly allows you to decouple the logical and physical notions of reusable types.</p></blockquote><blockquote><p>Iâ€™ve identified three reasons to use multifile assemblies:</p><p>â–  You can partition your types among separate files, allowing for files to be incrementally downloaded as described in the Internet download scenario.</p><p>â–  You can add resource or data files to your assembly.</p><p>â–  You can create assemblies consisting of types implemented in different programming languages.</p></blockquote><p>ğŸ’¡ Noteï¼šæ€»ä¹‹ï¼Œç¨‹åºé›†æ˜¯è¿›è¡Œé‡ç”¨ã€ç‰ˆæœ¬æ§åˆ¶å’Œåº”ç”¨å®‰å…¨æ€§è®¾ç½®çš„åŸºæœ¬å•å…ƒã€‚å¦‚æœå¤šä¸ªç±»å‹èƒ½å…±äº«ç›¸åŒçš„ç‰ˆæœ¬å·å’Œå®‰å…¨æ€§è®¾ç½®ï¼Œå»ºè®®å°†æ‰€æœ‰è¿™äº›ç±»å‹æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯åˆ†æ•£åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œæ›´ä¸è¦åˆ†æ•£åˆ°å¤šä¸ªç¨‹åºé›†ä¸­ï¼Œå› ä¸ºåŠ è½½è¾ƒå°‘çš„ç¨‹åºé›†æœ‰åŠ©äºå‡å°‘å·¥ä½œé›†ï¼ˆworking setï¼‰ï¼Œå¹¶ç¼“è§£è¿›ç¨‹åœ°å€ç©ºé—´çš„ç¢ç‰‡åŒ–ã€‚</p><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled4.png" alt="Untitled"></p><blockquote><p>The existence of a manifest provides a level of indirection between consumers of the assembly and the partitioning details of the assembly and makes assemblies self-describing. Also, note that the file containing the manifest has metadata information that indicates which files are part of the assembly, but the individual files themselves do not have metadata information that specifies that they are part of the assembly.</p></blockquote><p>ğŸ’¡ Noteï¼šåŒ…å«æ¸…å•çš„ç¨‹åºé›†æ–‡ä»¶è¿˜æœ‰ä¸€ä¸ª AssemblyRef è¡¨ã€‚ç¨‹åºé›†å…¨éƒ¨æ–‡ä»¶å¼•ç”¨çš„æ¯ä¸ªç¨‹åºé›†åœ¨è¿™ä¸ªè¡¨ä¸­éƒ½æœ‰ä¸€ä¸ªè®°å½•é¡¹ã€‚è¿™æ ·ä¸€æ¥ï¼Œå·¥å…·åªéœ€æ‰“å¼€ç¨‹åºé›†çš„æ¸…å•ï¼Œå°±å¯çŸ¥é“å®ƒå¼•ç”¨çš„å…¨éƒ¨ç¨‹åºé›†ï¼Œè€Œä¸å¿…æ‰“å¼€ç¨‹åºé›†çš„å…¶ä»–æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œæ¸…å•å…ƒæ•°æ®è¡¨å…¶å®å¹¶ä¸åŒ…å«ä»æ¸…å•æ‰€åœ¨çš„ PE æ–‡ä»¶å¯¼å‡ºçš„ç±»å‹ã€‚è¿™æ˜¯ä¸€é¡¹ä¼˜åŒ–æªæ–½ï¼Œæ—¨åœ¨å‡å°‘ PE æ–‡ä»¶ä¸­æ¸…å•ä¿¡æ¯é‡ã€‚</p><blockquote><p>There are many ways to add a module to an assembly. If youâ€™re using the C# compiler to build a PE file with a manifest, you can use the /addmodule switch. To understand how to build a multifile assembly, letâ€™s assume that we have two source code files:</p><p>â–  RUT.cs, which contains rarely used types</p><p>â–  FUT.cs, which contains frequently used types</p></blockquote><pre><code>csc /t:module RUT.cs

csc /out:MultiFileLibrary.dll /t:library /addmodule:RUT.netmodule FUT.cs
</code></pre><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled5.png" alt="Untitled"></p><blockquote><p>As the client code executes, it calls methods. When a method is called for the first time, the CLR detects the types that the method references as a parameter, a return type, or as a local variable. The CLR then attempts to load the referenced assemblyâ€™s file that contains the manifest. If the type being accessed is in this file, the CLR performs its internal bookkeeping, allowing the type to be used. If the manifest indicates that the referenced type is in a different file, the CLR attempts to load the necessary file, performs its internal bookkeeping, and allows the type to be accessed. The CLR loads assembly files only when a method referencing a type in an unloaded assembly is called. This means that to run an application, all of the files from a referenced assembly do not need to be present.</p></blockquote><p>ğŸ’¡ Noteï¼šå…ƒæ•°æ® token æ˜¯ä¸€ä¸ª 4 å­—èŠ‚çš„å€¼ã€‚å…¶ä¸­ï¼Œé«˜ä½å­—èŠ‚æŒ‡æ˜ token çš„ç±»å‹ (0x01=TypeRefï¼Œ0x02=TypeDefï¼Œ0x23=AssemblyRefï¼Œ 0x26=File (æ–‡ä»¶å®šä¹‰)ï¼Œ0x27=ExportedType)ã€‚è¦è·å–å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚è§ .NET Framework SDK åŒ…å«çš„ <code>CorHdr.h</code><br>æ–‡ä»¶ä¸­çš„ <code>CorTokenType</code><br>æšä¸¾ç±»å‹ã€‚token çš„ä¸‰ä¸ªä½ä½å­—èŠ‚æŒ‡æ˜å¯¹åº”çš„å…ƒæ•°æ®è¡¨ä¸­çš„è¡Œã€‚ä¾‹å¦‚ï¼Œ0x26000001 è¿™ä¸ªå®ç° token å¼•ç”¨çš„æ˜¯ File è¡¨çš„ç¬¬ä¸€è¡Œã€‚å¤§å¤šæ•°è¡¨çš„è¡Œä» 1 è€Œä¸æ˜¯ 0 å¼€å§‹ç¼–å·ã€‚ TypeDef è¡¨çš„è¡Œå·å®é™…ä» 2 å¼€å§‹ã€‚</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// Token tags.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">CorTokenType</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    mdtModule               <span class="token operator">=</span> <span class="token number">0x00000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    mdtTypeRef              <span class="token operator">=</span> <span class="token number">0x01000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    mdtTypeDef              <span class="token operator">=</span> <span class="token number">0x02000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    mdtFieldDef             <span class="token operator">=</span> <span class="token number">0x04000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    mdtMethodDef            <span class="token operator">=</span> <span class="token number">0x06000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    mdtParamDef             <span class="token operator">=</span> <span class="token number">0x08000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    mdtInterfaceImpl        <span class="token operator">=</span> <span class="token number">0x09000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    mdtMemberRef            <span class="token operator">=</span> <span class="token number">0x0a000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    mdtCustomAttribute      <span class="token operator">=</span> <span class="token number">0x0c000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    mdtPermission           <span class="token operator">=</span> <span class="token number">0x0e000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    mdtSignature            <span class="token operator">=</span> <span class="token number">0x11000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    mdtEvent                <span class="token operator">=</span> <span class="token number">0x14000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    mdtProperty             <span class="token operator">=</span> <span class="token number">0x17000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    mdtMethodImpl           <span class="token operator">=</span> <span class="token number">0x19000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    mdtModuleRef            <span class="token operator">=</span> <span class="token number">0x1a000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    mdtTypeSpec             <span class="token operator">=</span> <span class="token number">0x1b000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    mdtAssembly             <span class="token operator">=</span> <span class="token number">0x20000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    mdtAssemblyRef          <span class="token operator">=</span> <span class="token number">0x23000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    mdtFile                 <span class="token operator">=</span> <span class="token number">0x26000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    mdtExportedType         <span class="token operator">=</span> <span class="token number">0x27000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    mdtManifestResource     <span class="token operator">=</span> <span class="token number">0x28000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    mdtGenericParam         <span class="token operator">=</span> <span class="token number">0x2a000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    mdtMethodSpec           <span class="token operator">=</span> <span class="token number">0x2b000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    mdtGenericParamConstraint <span class="token operator">=</span> <span class="token number">0x2c000000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    mdtString               <span class="token operator">=</span> <span class="token number">0x70000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    mdtName                 <span class="token operator">=</span> <span class="token number">0x71000000</span><span class="token punctuation">,</span>       <span class="token comment">//</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    mdtBaseType             <span class="token operator">=</span> <span class="token number">0x72000000</span><span class="token punctuation">,</span>       <span class="token comment">// Leave this on the high end value. This does not correspond to metadata table</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span> CorTokenType<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="using-the-assembly-linker"><a class="anchor" href="#using-the-assembly-linker">#</a> <strong>Using the Assembly Linker</strong></h3><blockquote><p>Instead of using the C# compiler, you might want to create assemblies by using the Assembly Linker utility, AL.exe. The Assembly Linker is useful if you want to create an assembly consisting of modules built from different compilers (if your compiler doesnâ€™t support the equivalent of C#â€™s /addmodule switch) or perhaps if you just donâ€™t know your assembly packaging requirements at build time. You can also use AL.exe to build resource-only assemblies, called satellite assemblies, which are typically used for localization purposes. Iâ€™ll talk about satellite assemblies later in the chapter.</p></blockquote><blockquote><p>The AL.exe utility can produce an EXE or a DLL PE file that contains only a manifest describing the types in other modules. To understand how AL.exe works, letâ€™s change the way the MultiFileLibrary.dll assembly is built.</p></blockquote><pre><code>csc /t:module RUT.cs

csc /t:module FUT.cs

al /out: MultiFileLibrary.dll /t:library FUT.netmodule RUT.netmodule
</code></pre><p>Figure 2-3 shows the files that result from executing these statements.</p><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled6.png" alt="Untitled"></p><h3 id="adding-resource-files-to-an-assembly"><a class="anchor" href="#adding-resource-files-to-an-assembly">#</a> <strong>Adding Resource Files to an Assembly</strong></h3><blockquote><p>When using AL.exe to create an assembly, you can add a file as a resource to the assembly by using the <code>/embed[resource]</code> switch. This switch takes a file (any file) and embeds the fileâ€™s contents into the resulting PE file. The manifestâ€™s <code>ManifestResourceDef</code> table is updated to reflect the existence of the resources.</p></blockquote><blockquote><p>AL.exe also supports a <code>/link[resource]</code> switch, which also takes a file containing resources. However, the <code>/link[resource]</code> switch updates the manifestâ€™s <code>ManifestResourceDef</code> and <code>FileDef</code> tables, indicating that the resource exists and identifying which of the assemblyâ€™s files contains it. The resource file is not embedded into the assembly PE file; it remains separate and must be packaged and deployed with the other assembly files.</p></blockquote><blockquote><p>Like AL.exe, CSC.exe also allows you to combine resources into an assembly produced by the C# compiler. The C# compilerâ€™s <code>/resource</code> switch embeds the specified resource file into the resulting assembly PE file, updating the <code>ManifestResourceDef</code> table. The compilerâ€™s <code>/linkresource</code> switch adds an entry to the <code>ManifestResourceDef</code> and the <code>FileDef</code> manifest tables to refer to a stand-alone resource file.</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šç¨‹åºé›†æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å®šä¹‰æ–‡ä»¶åŠèµ„æºæ–‡ä»¶çš„é›†åˆã€‚åœ¨ç¨‹åºé›†çš„æ‰€æœ‰æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªæ–‡ä»¶å®¹çº³äº†æ¸…å•ã€‚æ¸…å•ä¹Ÿæ˜¯ä¸€ä¸ªå…ƒæ•°æ®è¡¨é›†åˆï¼Œè¡¨ä¸­ä¸»è¦åŒ…å«äº†ä½œä¸ºç¨‹åºé›†ç»„æˆéƒ¨åˆ†çš„é‚£äº›æ–‡ä»¶çš„åç§°ã€‚æ­¤å¤–ï¼Œè¿˜æè¿°äº†ç¨‹åºé›†çš„ç‰ˆæœ¬ã€è¯­è¨€æ–‡åŒ–ã€å‘å¸ƒè€…ã€å…¬å¼€å¯¼å‡ºçš„ç±»å‹ä»¥åŠæ„æˆç¨‹åºé›†çš„æ‰€æœ‰æ–‡ä»¶ã€‚ç±»å‹ä¸ºäº†é¡ºåˆ©åœ°è¿›è¡Œæ‰“åŒ…ã€ç‰ˆæœ¬æ§åˆ¶ã€å®‰å…¨ä¿æŠ¤ä»¥åŠä½¿ç”¨ï¼Œå¿…é¡»æ”¾åœ¨ä½œä¸ºç¨‹åºé›†ä¸€éƒ¨åˆ†çš„æ¨¡å—ä¸­ã€‚è€Œä»»æ„æ•°é‡çš„æ¨¡å—å’Œèµ„æºæ–‡ä»¶çš„ç»„åˆåˆ™å½¢æˆäº†å¤šæ–‡ä»¶ç¨‹åºé›†ã€‚æ‰€è°“å¤šæ–‡ä»¶ç¨‹åºé›†æŒ‡çš„æ˜¯ï¼Œåœ¨é€»è¾‘å±‚é¢ï¼Œæ‹¥æœ‰æ¸…å•æ–‡ä»¶çš„æ–‡ä»¶æœ¬èº«å·²ç»å®Œæ•´çš„æè¿°äº†è‡ªèº«ï¼Œç”±äºæœ‰äº†æ¸…å•çš„å­˜åœ¨ï¼Œç¨‹åºé›†çš„ç”¨æˆ·ä¸ç”¨å…³å¿ƒç¨‹åºé›†çš„åˆ’åˆ†ç»†èŠ‚ï¼›ä½†åœ¨ç‰©ç†å±‚é¢ï¼Œç¨‹åºé›†æ‰€å¼•ç”¨çš„ä¸€äº›æ¨¡å—å¯èƒ½åˆå­˜åœ¨äºåˆ«çš„æ–‡ä»¶å½“ä¸­ã€‚è¿™ä¹Ÿæ˜¯ â€œä½¿ç”¨ç¨‹åºé›†ï¼Œå¯é‡ç”¨ç±»å‹çš„é€»è¾‘è¡¨ç¤ºä¸ç‰©ç†è¡¨ç¤ºå°±å¯ä»¥åˆ†å¼€â€ è¿™å¥è¯çš„å«ä¹‰ã€‚å¤šæ–‡ä»¶ç¨‹åºé›†æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š1. ä¸åŒçš„ç±»å‹ç”¨ä¸åŒçš„æ–‡ä»¶ï¼Œä½¿æ–‡ä»¶èƒ½ä»¥ â€œå¢é‡â€ çš„æ–¹å¼ä¸‹è½½ã€‚2. å¯åœ¨ç¨‹åºé›†ä¸­æ·»åŠ èµ„æºæˆ–æ•°æ®æ–‡ä»¶ï¼ˆä½¿ç”¨ AL.exe æˆ– CSC.exeï¼‰ã€‚3. ç¨‹åºé›†åŒ…å«çš„å¤šä¸ªç±»å‹å¯ä»¥ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æ¥å®ç°ã€‚é—æ†¾çš„æ˜¯ï¼Œä¸èƒ½ç›´æ¥ä» Microsoft Visual Studio é›†æˆå¼€å‘ç¯å¢ƒä¸­åˆ›å»ºå¤šæ–‡ä»¶ç¨‹åºé›†ã€‚åªèƒ½ç”¨å‘½ä»¤è¡Œå·¥å…·åˆ›å»ºå¤šæ–‡ä»¶ç¨‹åºé›†ã€‚</p><h2 id="assembly-version-resource-information"><a class="anchor" href="#assembly-version-resource-information">#</a> <strong>Assembly Version Resource Information</strong></h2><blockquote><p>When AL.exe or CSC.exe produces a PE file assembly, it also embeds into the PE file a standard Win32 version resource. Users can examine this resource by viewing the fileâ€™s properties. Application code can also acquire and examine this information at run time by calling <code>System.Diagnostics.FileVersionInfo</code> â€™s static <code>GetVersionInfo</code> method with the assembly path as parameter. Figure 2-4 shows the Details tab of the MultiFileLibrary.dll Properties dialog box.</p></blockquote><blockquote><p>When building an assembly, you should set the version resource fields by using custom attributes that you apply at the assembly level in your source code. Hereâ€™s what the code that produced the version information in Figure 2-4 looks like.</p></blockquote><figure class="highlight csharp"><figcaption data-lang="C#"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Reflection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// FileDescription ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyTitle</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"MultiFileLibrary.dll"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// Comments ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyDescription</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"This assembly contains MultiFileLibrary's types"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// CompanyName ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyCompany</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Wintellect"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// ProductName ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyProduct</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Wintellect (R) MultiFileLibrary's Type Library"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// LegalCopyright ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyCopyright</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Copyright (c) Wintellect 2013"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// LegalTrademarks ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span><span class="token class-name">AssemblyTrademark</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"MultiFileLibrary is a registered trademark of Wintellect"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">// AssemblyVersion ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"3.0.0.0"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// FILEVERSION/FileVersion ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyFileVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"1.0.0.0"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// PRODUCTVERSION/ProductVersion ç‰ˆæœ¬ä¿¡æ¯:</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">[</span><span class="token attribute"><span class="token target keyword">assembly</span><span class="token punctuation">:</span> <span class="token class-name">AssemblyInformationalVersion</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"2.0.0.0"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">// è®¾ç½® Language å­—æ®µ (å‚è§ 2.6 èŠ‚â€ è¯­è¨€æ–‡åŒ– â€œ)</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">[</span>assembly<span class="token punctuation">:</span><span class="token function">AssemblyCulture</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr></table></figure><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled7.png" alt="Untitled"></p><p>ğŸ’¡ Noteï¼šWindows èµ„æºç®¡ç†å™¨çš„å±æ€§å¯¹è¯æ¡†æ˜æ˜¾é—æ¼äº†ä¸€äº›ç‰¹æ€§å€¼ã€‚æœ€é—æ†¾çš„æ˜¯æ²¡æœ‰æ˜¾ç¤º <strong>AssemblyVersion</strong> è¿™ä¸ªç‰¹æ€§çš„å€¼ï¼Œå› ä¸º CLR åŠ è½½ç¨‹åºé›†æ—¶ä¼šä½¿ç”¨è¿™ä¸ªå€¼ï¼Œè¯¦æƒ…å°†åœ¨ç¬¬ 3 ç« è®¨è®ºã€‚</p><h3 id="version-numbers"><a class="anchor" href="#version-numbers">#</a> <strong>Version Numbers</strong></h3><blockquote><p>the previous section, you saw that several version numbers can be applied to an assembly. All of these version numbers have the same format: each consists of four period-separated parts, as shown in Table 2-5.</p></blockquote><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled8.png" alt="Untitled"></p><blockquote><p>Youâ€™ll notice that an assembly has three version numbers associated with it. This is very unfortunate and leads to a lot of confusion. Let me explain each version numberâ€™s purpose and how it is expected to be used:</p></blockquote><p>â–  <strong><code>AssemblyFileVersion</code></strong></p><blockquote><p>This version number is stored in the Win32 version resource. This number is for information purposes only; the CLR doesnâ€™t examine this version number in any way. Typically, you set the major and minor parts to represent the version you want the public to see. Then you increment the build and revision parts each time a build is performed. Ideally, Microsoftâ€™s tool (such as CSC.exe or AL.exe) would automatically update the build and revision numbers for you (based on the date and time when the build was performed), but unfortunately, they donâ€™t. This version number can be seen when using Windows Explorer and is typically used to identify a specific version of an assembly when troubleshooting a customerâ€™s system.</p></blockquote><p>â–  <strong><code>AssemblyInformationalVersion</code></strong></p><blockquote><p>This version number is also stored in the Win32 version resource, and again, this number is for information purposes only; the CLR doesnâ€™t examine or care about it in any way. This version number exists to indicate the version of the product that includes this assembly. For example, version 2.0 of a product might contain several assemblies; one of these assemblies is marked as version 1.0 because itâ€™s a new assembly that didnâ€™t ship in version 1.0 of the same product. Typically, you set the major and minor parts of this version number to represent the public version of your product. Then you increment the build and revision parts each time you package a complete product with all its assemblies.</p></blockquote><p>â–  <strong><code>AssemblyVersion</code></strong></p><blockquote><p>This version number is stored in the <code>AssemblyDef</code> manifest metadata table. The CLR uses this version number when binding to strongly named assemblies (discussed in Chapter 3). This number is extremely important and is used to uniquely identify an assembly. When starting to develop an assembly, you should set the major, minor, build, and revision numbers and shouldnâ€™t change them until youâ€™re ready to begin work on the next deployable version of your assembly. When Assembly-A references a strongly named Assembly-B, Assembly-Bâ€™s version is embedded inside Assembly-Aâ€™s <code>AssemblyRef</code> tableâ€™s entry. This way, when the CLR needs to load Assembly-B, it knows exactly which version Assembly-A was built and tested with. It is possible to have the CLR load a different version by using a binding redirect, which is discussed in Chapter 3.</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šAL.exe æˆ– CSC.exe ç”Ÿæˆ PE æ–‡ä»¶ç¨‹åºé›†æ—¶ï¼Œè¿˜ä¼šåœ¨ PE æ–‡ä»¶ä¸­åµŒå…¥æ ‡å‡†çš„ Win32 ç‰ˆæœ¬èµ„æºï¼Œå¯ä»¥é€šè¿‡å®šåˆ¶ç‰¹æ€§æˆ–è€… AL.exe å‘½ä»¤è¡Œå¼€å…³è®¾ç½®è¿™äº›ä¿¡æ¯ã€‚é€šè¿‡æŸ¥çœ‹æ–‡ä»¶å±æ€§å¯ä»¥æ£€æŸ¥è¯¥èµ„æºï¼Œä½†åœ¨å±æ€§å¯¹è¯æ¡†ä¸­å¹¶ä¸ä¼šæ˜¾ç¤º AssemblyVersion è¿™ä¸ªç‰¹æ€§çš„ï¼Œå› ä¸º CLR åŠ è½½ç¨‹åºé›†æ—¶ä¼šä½¿ç”¨è¿™ä¸ªå€¼ï¼Œè¿™ä¸ªç‰ˆæœ¬å·å”¯ä¸€åœ°æ ‡è¯†äº†ç¨‹åºé›†ï¼Œå¦‚æœç¨‹åºé›† A å¼•ç”¨äº†å¼ºå‘½åçš„ç¨‹åºé›† Bï¼Œç¨‹åºé›† B çš„ç‰ˆæœ¬ä¼šåµŒå…¥ç¨‹åºé›†çš„ AssemblyRef è¡¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ CLR éœ€è¦åŠ è½½ç¨‹åºé›† B æ—¶ï¼Œå°±å‡†ç¡®åœ°çŸ¥é“å½“åˆç”Ÿæˆå’Œæµ‹è¯•çš„æ˜¯ç¨‹åºé›†çš„å“ªä¸ªç‰ˆæœ¬ã€‚ç¨‹åºé›†æœ‰ä¸‰ä¸ªç‰ˆæœ¬å·ï¼ŒAssemblyFileVersion å’Œ AssemblyInformationalVersion ç‰ˆæœ¬å·ä»…ä¾›å‚è€ƒï¼ŒCLR æ—¢ä¸æ£€æŸ¥ï¼Œä¹Ÿä¸å…³å¿ƒå®ƒã€‚</p><h2 id="culture"><a class="anchor" href="#culture">#</a> <strong>Culture</strong></h2><blockquote><p>Like version numbers, assemblies also have a culture as part of their identity. For example, I could have an assembly that is strictly for German, another assembly for Swiss German, another assembly for US English, and so on. Cultures are identified via a string that contains a primary and a secondary tag (as described in RFC 1766). Table 2-6 shows some examples.</p></blockquote><p><img data-src="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/Untitled9.png" alt="Untitled"></p><blockquote><p>In general, if you create an assembly that contains code, you donâ€™t assign a culture to it. This is because code doesnâ€™t usually have any culture-specific assumptions built into it. An assembly that isnâ€™t assigned a culture is referred to as being culture neutral.</p></blockquote><blockquote><p>If youâ€™re designing an application that has some culture-specific resources to it, Microsoft highly recommends that you create one assembly that contains your code and your applicationâ€™s default (or fallback) resources. When building this assembly, donâ€™t specify a culture. This is the assembly that other assemblies will reference when they create and manipulate types it publicly exposes.</p></blockquote><blockquote><p>Now you can create one or more separate assemblies that contain only culture-specific resourcesâ€” no code at all. Assemblies that are marked with a culture are called satellite assemblies. For these satellite assemblies, assign a culture that accurately reflects the culture of the resources placed in the assembly. You should create one satellite assembly for each culture you intend to support.</p></blockquote><blockquote><p>Youâ€™ll usually use the AL.exe tool to build a satellite assembly. You wonâ€™t use a compiler because the satellite assembly should have no code contained within it. When using AL.exe, you specify the desired culture by using the <code>/c[ulture]:text</code> switch, where text is a string such as â€œen-US,â€ representing US English. When you deploy a satellite assembly, you should place it in a subdirectory whose name matches the culture text. For example, if the applicationâ€™s base directory is C:\MyApp, the US English satellite assembly should be placed in the C:\MyApp\en-US subdirectory. At run time, you access a satellite assemblyâ€™s resources by using the <code>System.Resources.ResourceManager</code> class.</p></blockquote><blockquote><p>Normally, you shouldnâ€™t build an assembly that references a satellite assembly. In other words, an assemblyâ€™s <code>AssemblyRef</code> entries should all refer to culture-neutral assemblies. If you want to access types or members contained in a satellite assembly, you should use reflection techniques as discussed in Chapter 23, â€œAssembly Loading and Reflection.â€</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šé™¤äº†ç‰ˆæœ¬å·ï¼Œç¨‹åºé›†è¿˜å°†è¯­è¨€æ–‡åŒ–ï¼ˆcultureï¼‰ä½œä¸ºå…¶èº«ä»½æ ‡è¯†çš„ä¸€éƒ¨åˆ†ã€‚åˆ›å»ºå«ä»£ç çš„ç¨‹åºé›†æ—¶ä¸€åŠä¸æŒ‡å®šå…·ä½“çš„è¯­è¨€æ–‡åŒ–ã€‚è¿™æ˜¯å› ä¸ºä»£ç åªè®² â€œé€»è¾‘â€ï¼Œä¸æ¶‰åŠå…·ä½“çš„è¯­è¨€æ–‡åŒ–ã€‚æœªæŒ‡å®šå…·ä½“è¯­è¨€æ–‡åŒ–çš„ç¨‹åºé›†ç§°ä¸ºè¯­è¨€æ–‡åŒ–ä¸­æ€§ï¼ˆculture neutralï¼‰ã€‚æ ‡è®°äº†è¯­è¨€æ–‡åŒ–çš„ç¨‹åºé›†ç§°ä¸ºé™„å±ç¨‹åºé›†ï¼ˆsatellite assemblyï¼‰ã€‚é€šå¸¸ä½¿ç”¨ AL.exe ç”Ÿæˆç¨‹åºé›†ã€‚ä¸ç”¨ç¼–è¯‘å™¨çš„æ˜¯å› ä¸ºé™„å±ç¨‹åºé›†æœ¬èº«å°±ä¸è¯¥å«æœ‰ä»£ç ã€‚éƒ¨ç½²é™„å±ç¨‹åºé›†æ—¶ï¼Œåº”è¯¥æŠŠå®ƒä¿å­˜åˆ°ä¸“é—¨çš„å­ç›®å½•ä¸­ï¼Œå­ç›®å½•åç§°å’Œè¯­è¨€æ–‡åŒ–çš„æ–‡æœ¬åŒ¹é…ã€‚ä¸€èˆ¬ä¸è¦ç”Ÿæˆå¼•ç”¨äº†é™„å±ç¨‹åºé›†çš„ç¨‹åºé›†ã€‚æ¢è¨€ä¹‹ï¼Œç¨‹åºé›†çš„ AssemblyRef è®°å½•é¡¹åªåº”å¼•ç”¨è¯­è¨€æ–‡åŒ–ä¸­æ€§çš„ç¨‹åºé›†ã€‚</p><h2 id="simple-application-deployment-privately-deployed-assemblies"><a class="anchor" href="#simple-application-deployment-privately-deployed-assemblies">#</a> <strong>Simple Application Deployment (Privately Deployed Assemblies)</strong></h2><blockquote><p>Windows Store apps have very strict rules about packaging assemblies, and Visual Studio will package all of an applicationâ€™s required assemblies together into a single .appx file, which is either uploaded to the Windows Store or can be side-loaded onto a machine. When a user installs an .appx file, all the assemblies it contains are placed in a directory where the CLR will load them and Windows adds an application tile to the user's Start screen. If other users install the same .appx file, the previously installed assemblies are used and the new user simply gets a tile added to their Start screen. When a user uninstalls a Windows Store app, the system removes the tile from the user's Start screen. If no other users have the app installed, then Windows destroys the directory along with all the assemblies. Note that different users can install different versions of the same Windows Store app. To accommodate this, Windows installs the assemblies into different directories so that multiple versions of a single app can reside on a single machine simultaneously.</p></blockquote><blockquote><p>For desktop (non-Windows Store) applications, assemblies donâ€™t dictate or require any special means of packaging. The easiest way to package a set of assemblies is simply to copy all of the files directly. For example, you could put all of the assembly files on a CD-ROM and ship it to the user with a batch file setup program that just copies the files from the CD to a directory on the userâ€™s hard drive. Because the assemblies include all of the dependent assembly references and types, the user can just run the application and the runtime will look for referenced assemblies in the applicationâ€™s directory. No modifications to the registry are necessary for the application to run. To uninstall the application, just delete all the filesâ€”thatâ€™s it!</p></blockquote><blockquote><p>Of course, you can package and install the assembly files by using other mechanisms, such as .cab files (typically used for Internet download scenarios to compress files and reduce download times). You can also package the assembly files into an MSI file for use by the Windows Installer service (MSIExec.exe). Using MSI files allows assemblies to be installed on demand the first time the CLR attempts to load the assembly. This feature isnâ€™t new to MSI; it can perform the same demand-load functionality for unmanaged EXE and DLL files as well.</p></blockquote><blockquote><p>Of course, Visual Studio has a built-in mechanism that you can use to publish an application by displaying a projectâ€™s Properties pages and clicking the Publish tab. You can use the options available on the Publish tab to cause Visual Studio to produce an MSI file and copy the resulting MSI file to a website, FTP server, or file path. The MSI file can also install any prerequisite components such as the .NET Framework or Microsoft SQL Server Express Edition. Finally, the application can automatically check for updates and install them on the userâ€™s machine by taking advantage of ClickOnce technology.</p></blockquote><blockquote><p>Assemblies deployed to the same directory as the application are called privately deployed assemblies because the assembly files arenâ€™t shared with any other application (unless the other application is also deployed to the same directory). Privately deployed assemblies are a big win for developers, end users, and administrators because they can simply be copied to an applicationâ€™s base directory, and the CLR will load them and execute the code in them. In addition, an application can be uninstalled by simply deleting the assemblies in its directory. This allows simple backup and restore as well.</p></blockquote><blockquote><p>This simple install/move/uninstall scenario is possible because each assembly has metadata indicating which referenced assembly should be loaded; no registry settings are required. In addition, the referencing assembly scopes every type. This means that an application always binds to the same type it was built and tested with; the CLR canâ€™t load a different assembly that just happens to provide a type with the same name. This is different from COM, in which types are recorded in the registry, making them available to any application running on the machine.</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šå¯¹äº Windows Store åº”ç”¨ç¨‹åºçš„æ‰“åŒ…ï¼ŒVisual Studio ä¼šå°†åº”ç”¨ç¨‹åºæ‰€æœ‰å¿…è¦çš„ç¨‹åºé›†æ‰“åŒ…æˆä¸€ä¸ª.appx æ–‡ä»¶ã€‚ç”¨æˆ·å®‰è£….appx æ–‡ä»¶æ—¶ï¼Œå…¶ä¸­åŒ…å«çš„æ‰€æœ‰ç¨‹åºé›†éƒ½è¿›å…¥ä¸€ä¸ªç›®å½•ã€‚å¯¹äºé Windows Store çš„æ¡Œé¢åº”ç”¨ï¼Œæ‰“åŒ…ä¸€ç»„ç¨‹åºé›†æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç›´æ¥å¤åˆ¶æ‰€æœ‰æ–‡ä»¶ã€‚ç”±äºå·²ç»åŒ…å«äº†æ‰€æœ‰ä¾èµ–çš„ç¨‹åºé›†å’Œç±»å‹ï¼Œæ‰€ä»¥ç”¨æˆ·èƒ½ç›´æ¥è¿è¡Œåº”ç”¨ç¨‹åºï¼Œâ€œè¿è¡Œæ—¶â€ ä¼šåœ¨åº”ç”¨ç¨‹åºç›®å½•æŸ¥æ‰¾å¼•ç”¨çš„ç¨‹åºé›†ã€‚ä¸éœ€è¦å¯¹æ³¨å†Œè¡¨è¿›è¡Œä»»ä½•ä¿®æ”¹å°±èƒ½è¿è¡Œç¨‹åºã€‚å¸è½½çš„è¯ç›´æ¥åˆ é™¤æ‰€æœ‰æ–‡ä»¶å³å¯ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨.cab æ–‡ä»¶ã€MSI æ–‡ä»¶æ‰“åŒ…å’Œå®‰è£…ç¨‹åºé›†ã€‚åœ¨åº”ç”¨ç¨‹åºåŸºç›®å½•æˆ–è€…å­ç›®å½•éƒ¨ç½²çš„ç¨‹åºé›†ç§°ä¸ºç§æœ‰éƒ¨ç½²çš„ç¨‹åºé›†ï¼ˆprivately deployed assemblyï¼‰ï¼Œè¿™æ˜¯å› ä¸ºç¨‹åºé›†æ–‡ä»¶ä¸å’Œå…¶ä»–ä»»ä½•åº”ç”¨ç¨‹åºå…±äº«ï¼ˆé™¤éå…¶ä»–åº”ç”¨ç¨‹åºå¾ä¹Ÿéƒ¨ç½²åˆ°æ”¹ç›®å½•ï¼‰ã€‚å­æ‰€ä»¥èƒ½å®ç°è¿™ç§ç®€å•çš„å®‰è£… / ç§»åŠ¨ / å¸è½½ï¼Œæ˜¯å› ä¸ºæ¯ä¸ªç¨‹åºé›†éƒ½ç”¨å…ƒæ•°æ®æ ‡æ˜äº†è‡ªå·±å¼•ç”¨çš„ç¨‹åºé›†ï¼Œä¸éœ€è¦æ³¨å†Œè¡¨è®¾ç½®ã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºæ€»æ˜¯å’Œå®ƒç”Ÿæˆå’Œæµ‹è¯•æ—¶çš„ç±»å‹ç»‘å®šã€‚å³ä¾¿å¦ä¸€ä¸ªç¨‹åºé›†æ°å¥½æä¾›äº†åŒåç±»å‹ï¼ŒCLR ä¹Ÿä¸å¯èƒ½åŠ è½½é‚£ä¸ªç¨‹åºé›†ã€‚è¿™ä¸€ç‚¹æœ‰åˆ«äº COMã€‚åœ¨ COM ä¸­ï¼Œç±»å‹æ˜¯åœ¨æ³¨å†Œè¡¨ä¸­ç™»è®°çš„ï¼Œé€ æˆæœºå™¨ä¸Šè¿è¡Œçš„ä»»ä½•åº”ç”¨ç¨‹åºéƒ½èƒ½ä½¿ç”¨é‚£äº›ç±»å‹ã€‚</p><h2 id="simple-administrative-control-configuration"><a class="anchor" href="#simple-administrative-control-configuration">#</a> <strong>Simple Administrative Control (Configuration)</strong></h2><blockquote><p>To allow administrative control over an application, a configuration file can be placed in the applicationâ€™s directory. An applicationâ€™s publisher can create and package this file. The setup program would then install this configuration file in the applicationâ€™s base directory. In addition, the machineâ€™s administrator or an end user could create or modify this file. The CLR interprets the content of this file to alter its policies for locating and loading assembly files.</p></blockquote><blockquote><p>These configuration files contain Extensible Markup Language (XML) and can be associated with an application or with the machine. Using a separate file (versus registry settings) allows the file to be easily backed up and also allows the administrator to copy the application to another machineâ€”just copy the necessary files and the administrative policy is copied too.</p></blockquote><blockquote><p>Whenever the CLR attempts to locate an assembly file, it always looks in the applicationâ€™s directory first, and if it canâ€™t find the file there, it looks in the AuxFiles subdirectory. You can specify multiple semicolon-delimited paths for the probing elementâ€™s privatePath attribute. Each path is considered relative to the applicationâ€™s base directory. You canâ€™t specify an absolute or a relative path identifying a directory that is outside of the applicationâ€™s base directory. The idea is that an application can control its directory and its subdirectories but has no control over other directories.</p></blockquote><blockquote><p>The name and location of this XML configuration file is different depending on the application type:</p></blockquote><p>â–  For executable applications (EXEs), the configuration file must be in the applicationâ€™s base directory, and it must be the name of the EXE file with â€œ.configâ€ appended to it.</p><p>â–  For Microsoft <span class="exturl" data-url="aHR0cDovL0FTUC5ORVQ=">ASP.NET</span> Web Form applications, the file must be in the Web applicationâ€™s virtual root directory and is always named Web.config. In addition, subdirectories can also contain their own Web.config file, and the configuration settings are inherited. For example, a Web application located at <span class="exturl" data-url="aHR0cDovL3dpbnRlbGxlY3QuY29tL1RyYWluaW5n">http://Wintellect.com/Training</span> would use the settings in the Web.config files contained in the virtual root directory and in its Training subdirectory.</p><blockquote><p>As mentioned at the beginning of this section, configuration settings apply to a particular application and to the machine. When you install the .NET Framework, it creates a Machine.config file. There is one Machine.config file per version of the CLR you have installed on the machine.</p></blockquote><blockquote><p>The Machine.config file is located in the following directory:</p></blockquote><pre><code>%SystemRoot%\Microsoft.NET\Framework\version\CONFIG
</code></pre><blockquote><p>Of course, %SystemRoot% identifies your Windows directory (usually C:\WINDOWS), and version is a version number identifying a specific version of the .NET Framework (something like v4.0.#####).</p></blockquote><blockquote><p>Settings in the Machine.config file represent default settings that affect all applications running on the machine. An administrator can create a machine-wide policy by modifying the single Machine.config file. However, administrators and users should avoid modifying this file because it contains many settings related to various things, making it much more difficult to navigate. Plus, you want the applicationâ€™s settings to be backed up and restored, and keeping an applicationâ€™s settings in the application-specific configuration file enables this.</p></blockquote><p>ğŸ’¡ å°ç»“ï¼šä¸ºäº†å®ç°å¯¹åº”ç”¨ç¨‹åºçš„ç®¡ç†æ§åˆ¶ï¼Œå¯åœ¨åº”ç”¨ç¨‹åºç›®å½•æ”¾å…¥ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚åº”ç”¨ç¨‹åºçš„å‘å¸ƒè€…å¯åˆ›å»ºå¹¶æ‰“åŒ…è¯¥æ–‡ä»¶ã€‚å®‰è£…ç¨‹åºä¼šå°†é…ç½®æ–‡ä»¶å®‰è£…åˆ°åº”ç”¨ç¨‹åºçš„åŸºç›®å½•ã€‚å¦å¤–ï¼Œè®¡ç®—æœºç®¡ç†å‘˜æˆ–æœ€ç»ˆç”¨æˆ·ä¹Ÿèƒ½åˆ›å»ºæˆ–ä¿®æ”¹è¯¥æ–‡ä»¶ã€‚CLR ä¼šè§£ææ–‡ä»¶å†…å®¹æ¥æ›´æ”¹ç¨‹åºé›†æ–‡ä»¶çš„å®šä½å’ŒåŠ è½½ç­–ç•¥ã€‚é…ç½®æ–‡ä»¶åŒ…å« XML ä»£ç ï¼Œå®ƒæ—¢èƒ½å’Œåº”ç”¨ç¨‹åºå…³è”ï¼Œä¹Ÿèƒ½å’Œæœºå™¨å…³è”ã€‚CLR å°è¯•å®šä½ç¨‹åºé›†æ–‡ä»¶æ—¶ï¼Œæ€»æ˜¯å…ˆåœ¨åº”ç”¨ç¨‹åºåŸºç›®å½•æŸ¥æ‰¾ã€‚é€šè¿‡ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶å¯ä»¥æŒ‡å®šåŒ…å«ç¨‹åºé›†çš„å­ç›®å½•ã€‚å¯¹äºå¯æ‰§è¡Œåº”ç”¨ç¨‹åºï¼ˆEXEï¼‰ï¼Œé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åº”ç”¨ç¨‹åºçš„åŸºç›®å½•ï¼Œè€Œä¸”å¿…é¡»é‡‡ç”¨ EXE æ–‡ä»¶å…¨åä½œä¸ºæ–‡ä»¶åï¼Œå†é™„åŠ .config æ‰©å±•åã€‚å¯¹äº Microsoft <span class="exturl" data-url="aHR0cDovL0FTUC5ORVQ=">ASP.NET</span> Web çª—ä½“åº”ç”¨ç¨‹åºï¼Œæ–‡ä»¶å¿…é¡»åœ¨ Web åº”ç”¨ç¨‹åºçš„è™šæ‹Ÿæ ¹ç›®å½•ä¸­ï¼Œè€Œä¸”æ€»æ˜¯å‘½åä¸º Web.configã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå­ç›®å½•å¯ä»¥åŒ…å«è‡ªå·±çš„ Web.configï¼Œè€Œä¸”é…ç½®è®¾ç½®ä¼šå¾—åˆ°ç»§æ‰¿ã€‚åº”ç”¨äºæœºå™¨çš„é…ç½®è®¾ç½®æŒ‡çš„æ˜¯ï¼š.NET Framework åœ¨å®‰è£…æ—¶ä¼šåˆ›å»ºä¸€ä¸ª Machine.configã€‚æœºå™¨ä¸Šå®‰è£…çš„æ¯ä¸ªç‰ˆæœ¬çš„ CLR éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ Machine.configã€‚Machine.config æ–‡ä»¶çš„è®¾ç½®å°†ä¼šå½±å“æœºå™¨ä¸Šè¿è¡Œçš„æ‰€æœ‰åº”ç”¨ç¨‹åºçš„é»˜è®¤è®¾ç½®ã€‚</p><div class="tags"><a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag"><i class="ic i-tag"></i> è¯»ä¹¦ç¬”è®°</a> <a href="/tags/C/" rel="tag"><i class="ic i-tag"></i> C#</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2023-11-22 08:09:43" itemprop="dateModified" datetime="2023-11-22T08:09:43+08:00">2023-11-22</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> Donate</button><p>Give me a cup of [coffee]~(ï¿£â–½ï¿£)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Sakupinera WeChat Pay"><p>WeChat Pay</p></div><div><img data-src="/images/alipay.png" alt="Sakupinera Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="Sakupinera PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>Sakupinera <i class="ic i-at"><em>@</em></i>Sakupinera</li><li class="link"><strong>Post link: </strong><a href="http://sakupinera.github.io/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/" title="CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types">http://sakupinera.github.io/2022/08/28/csharp/clr-via-csharp/Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%203%20Shared%20Assemblies%20and%20Strongly%20Named%20Assemblies/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicit31ffoj20zk0m8naf.jpg" title="CLR via C# - Chapter 3 Shared Assemblies and Strongly Named Assemblies"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> CLR-via-CSharp</span><h3>CLR via C# - Chapter 3 Shared Assemblies and Strongly Named Assemblies</h3></a></div><div class="item right"><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%201%20The%20CLR%E2%80%99s%20Execution%20Model/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciuja1j1j20zk0m8kjl.jpg" title="CLR via C# - Chapter 1 The CLRâ€™s Execution Model"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> CLR-via-CSharp</span><h3>CLR via C# - Chapter 1 The CLRâ€™s Execution Model</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-2-building-packaging-deploying-and-administering-applications-and-types"><span class="toc-number">1.</span> <span class="toc-text">Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#net-framework-deployment-goals"><span class="toc-number">1.1.</span> <span class="toc-text">.NET Framework Deployment Goals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#building-types-into-a-module"><span class="toc-number">1.2.</span> <span class="toc-text">Building Types into a Module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#a-brief-look-at-metadata"><span class="toc-number">1.3.</span> <span class="toc-text">A Brief Look at Metadata</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#combining-modules-to-form-an-assembly"><span class="toc-number">1.4.</span> <span class="toc-text">Combining Modules to Form an Assembly</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#using-the-assembly-linker"><span class="toc-number">1.4.1.</span> <span class="toc-text">Using the Assembly Linker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#adding-resource-files-to-an-assembly"><span class="toc-number">1.4.2.</span> <span class="toc-text">Adding Resource Files to an Assembly</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#assembly-version-resource-information"><span class="toc-number">1.5.</span> <span class="toc-text">Assembly Version Resource Information</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#version-numbers"><span class="toc-number">1.5.1.</span> <span class="toc-text">Version Numbers</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#culture"><span class="toc-number">1.6.</span> <span class="toc-text">Culture</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#simple-application-deployment-privately-deployed-assemblies"><span class="toc-number">1.7.</span> <span class="toc-text">Simple Application Deployment (Privately Deployed Assemblies)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#simple-administrative-control-configuration"><span class="toc-number">1.8.</span> <span class="toc-text">Simple Administrative Control (Configuration)</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%201%20The%20CLR%E2%80%99s%20Execution%20Model/" rel="bookmark" title="CLR via C# - Chapter 1 The CLRâ€™s Execution Model">CLR via C# - Chapter 1 The CLRâ€™s Execution Model</a></li><li class="active"><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%202%20Building,%20Packaging,%20Deploying,%20and%20Administering%20Applications%20and%20Types/" rel="bookmark" title="CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types">CLR via C# - Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types</a></li><li><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%203%20Shared%20Assemblies%20and%20Strongly%20Named%20Assemblies/" rel="bookmark" title="CLR via C# - Chapter 3 Shared Assemblies and Strongly Named Assemblies">CLR via C# - Chapter 3 Shared Assemblies and Strongly Named Assemblies</a></li><li><a href="/2022/09/27/csharp/clr-via-csharp/Chapter%204%20Type%20Fundamentals/" rel="bookmark" title="CLR via C# - Chapter 4 Type Fundamentals">CLR via C# - Chapter 4 Type Fundamentals</a></li><li><a href="/2022/10/15/csharp/clr-via-csharp/Chapter%205%20Primitive,%20Reference,%20and%20Value%20%20Types/" rel="bookmark" title="CLR via C# - Chapter 5 Primitive, Reference, and Value Types Fundamentals">CLR via C# - Chapter 5 Primitive, Reference, and Value Types Fundamentals</a></li><li><a href="/2022/10/21/csharp/clr-via-csharp/Chapter%206%20Type%20and%20Member%20Basics/" rel="bookmark" title="CLR via C# - Chapter 6 Type and Member Basics">CLR via C# - Chapter 6 Type and Member Basics</a></li><li><a href="/2022/10/24/csharp/clr-via-csharp/Chapter%207%20Constants%20and%20Fields/" rel="bookmark" title="CLR via C# - Chapter 7 Constants and Fields">CLR via C# - Chapter 7 Constants and Fields</a></li><li><a href="/2022/10/25/csharp/clr-via-csharp/Chapter%208%20Methods/" rel="bookmark" title="CLR via C# - Chapter 8 Methods">CLR via C# - Chapter 8 Methods</a></li><li><a href="/2022/10/27/csharp/clr-via-csharp/Chapter%209%20Parameters/" rel="bookmark" title="CLR via C# - Chapter 9 Parameters">CLR via C# - Chapter 9 Parameters</a></li><li><a href="/2022/10/28/csharp/clr-via-csharp/Chapter%2010%20Properties/" rel="bookmark" title="CLR via C# - Chapter 10 Properties">CLR via C# - Chapter 10 Properties</a></li><li><a href="/2022/10/29/csharp/clr-via-csharp/Chapter%2011%20Events/" rel="bookmark" title="CLR via C# - Chapter 11 Events">CLR via C# - Chapter 11 Events</a></li><li><a href="/2022/11/02/csharp/clr-via-csharp/Chapter%2012%20Generics/" rel="bookmark" title="CLR via C# - Chapter 12 Generics">CLR via C# - Chapter 12 Generics</a></li><li><a href="/2022/11/04/csharp/clr-via-csharp/Chapter%2013%20Interfaces/" rel="bookmark" title="CLR via C# - Chapter 13 Interfaces">CLR via C# - Chapter 13 Interfaces</a></li><li><a href="/2022/11/16/csharp/clr-via-csharp/Chapter%2014%20Chars,%20Strings,%20and%20Working%20%20with%20Text/" rel="bookmark" title="CLR via C# - Chapter 14 Chars, Strings, and Working with Text">CLR via C# - Chapter 14 Chars, Strings, and Working with Text</a></li><li><a href="/2022/11/17/csharp/clr-via-csharp/Chapter%2015%20Enumerated%20Types%20and%20Bit%20Flags/" rel="bookmark" title="CLR via C# - Chapter 15 Enumerated Types and Bit Flags">CLR via C# - Chapter 15 Enumerated Types and Bit Flags</a></li><li><a href="/2022/11/19/csharp/clr-via-csharp/Chapter%2016%20Arrays/" rel="bookmark" title="CLR via C# - Chapter 16 Arrays">CLR via C# - Chapter 16 Arrays</a></li><li><a href="/2022/11/21/csharp/clr-via-csharp/Chapter%2017%20Delegates/" rel="bookmark" title="CLR via C# - Chapter 17 Delegates">CLR via C# - Chapter 17 Delegates</a></li><li><a href="/2022/11/22/csharp/clr-via-csharp/Chapter%2018%20Custom%20Attributes/" rel="bookmark" title="CLR via C# - Chapter 18 Custom Attributes">CLR via C# - Chapter 18 Custom Attributes</a></li><li><a href="/2022/11/23/csharp/clr-via-csharp/Chapter%2019%20Nullable%20Value%20Types/" rel="bookmark" title="CLR via C# - Chapter 19 Nullable Value Types">CLR via C# - Chapter 19 Nullable Value Types</a></li><li><a href="/2022/11/25/csharp/clr-via-csharp/Chapter%2020%20Exceptions%20and%20State%20Management/" rel="bookmark" title="CLR via C# - Chapter 20 Exceptions and State Management">CLR via C# - Chapter 20 Exceptions and State Management</a></li><li><a href="/2022/11/27/csharp/clr-via-csharp/Chapter%2021%20The%20Managed%20Heap%20and%20Garbage%20%20Collection/" rel="bookmark" title="CLR via C# - Chapter 21 The Managed Heap and Garbage  Collection">CLR via C# - Chapter 21 The Managed Heap and Garbage Collection</a></li><li><a href="/2022/11/28/csharp/clr-via-csharp/Chapter%2022%20CLR%20Hosting%20and%20AppDomains/" rel="bookmark" title="CLR via C# - Chapter 22 CLR Hosting and AppDomains">CLR via C# - Chapter 22 CLR Hosting and AppDomains</a></li><li><a href="/2022/11/29/csharp/clr-via-csharp/Chapter%2023%20Assembly%20Loading%20and%20Reflection/" rel="bookmark" title="CLR via C# - Chapter 23 Assembly Loading and Reflection">CLR via C# - Chapter 23 Assembly Loading and Reflection</a></li><li><a href="/2022/11/30/csharp/clr-via-csharp/Chapter%2024%20Runtime%20Serialization/" rel="bookmark" title="CLR via C# - Chapter 24 Runtime Serialization">CLR via C# - Chapter 24 Runtime Serialization</a></li><li><a href="/2022/12/06/csharp/clr-via-csharp/Chapter%2025%20Interoperating%20with%20WinRT%20%20Components/" rel="bookmark" title="CLR via C# - Chapter 25 Interoperating with WinRT Components">CLR via C# - Chapter 25 Interoperating with WinRT Components</a></li><li><a href="/2023/02/06/csharp/clr-via-csharp/Chapter%2026%20Thread%20Basics/" rel="bookmark" title="CLR via C# - Chapter 26 Thread Basics">CLR via C# - Chapter 26 Thread Basics</a></li><li><a href="/2023/02/07/csharp/clr-via-csharp/Chapter%2027%20Compute-Bound%20Asynchronous%20Operations/" rel="bookmark" title="CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations">CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations</a></li><li><a href="/2023/02/08/csharp/clr-via-csharp/Chapter%2028%20IO-Bound%20Asynchronous%20Operations/" rel="bookmark" title="CLR via C# - Chapter 28 IO-Bound Asynchronous Operations">CLR via C# - Chapter 28 IO-Bound Asynchronous Operations</a></li><li><a href="/2023/02/09/csharp/clr-via-csharp/Chapter%2029%20Primitive%20Thread%20Synchronization%20Constructs/" rel="bookmark" title="CLR via C# - Chapter 29 Primitive Thread Synchronization">CLR via C# - Chapter 29 Primitive Thread Synchronization</a></li><li><a href="/2023/02/10/csharp/clr-via-csharp/Chapter%2030%20Hybrid%20Thread%20Synchronization%20Constructs/" rel="bookmark" title="CLR via C# - Chapter 30 Hybrid Thread Synchronization">CLR via C# - Chapter 30 Hybrid Thread Synchronization</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Sakupinera" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Sakupinera</p><div class="description" itemprop="description">ä¿æŒä½ çš„å†³å¿ƒï¼</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">89</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">17</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">8</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Nha3VwaW5lcmE=" title="https:&#x2F;&#x2F;github.com&#x2F;sakupinera"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9zYWt1cGluZXJh" title="https:&#x2F;&#x2F;twitter.com&#x2F;sakupinera"><i class="ic i-twitter"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQwNzIyOTA3MQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;407229071"><i class="ic i-cloud-music"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMjIzMDczOTg/c3BtX2lkX2Zyb209MzMzLjEwMDcuMC4w" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;22307398?spm_id_from&#x3D;333.1007.0.0"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/games/" rel="section"><i class="ic i-flag"></i>games</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-person"></i>About</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%203%20Shared%20Assemblies%20and%20Strongly%20Named%20Assemblies/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2022/08/28/csharp/clr-via-csharp/Chapter%201%20The%20CLR%E2%80%99s%20Execution%20Model/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2023/02/07/csharp/clr-via-csharp/Chapter%2027%20Compute-Bound%20Asynchronous%20Operations/" title="CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations">CLR via C# - Chapter 27 Compute-Bound Asynchronous Operations</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Computer-Graphics/" title="In Computer-Graphics">Computer-Graphics</a> <i class="ic i-angle-right"></i> <a href="/categories/Computer-Graphics/GAMES101/" title="In GAMES101">GAMES101</a></div><span><a href="/2022/10/14/computer-graphics/games101/%E6%9D%90%E8%B4%A8%E4%B8%8E%E5%A4%96%E8%A7%82/" title="GAMES101 - Materials and Appearancesï¼ˆæè´¨ä¸å¤–è§‚ï¼‰">GAMES101 - Materials and Appearancesï¼ˆæè´¨ä¸å¤–è§‚ï¼‰</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Cpp/" title="In Cpp">Cpp</a> <i class="ic i-angle-right"></i> <a href="/categories/Cpp/Cpp-Primer/" title="In Cpp-Primer">Cpp-Primer</a></div><span><a href="/2023/01/05/cpp/cpp-primer/Chapter%2013%20Copy%20Control/" title="C++ Primer - Chapter 13 Copy Control">C++ Primer - Chapter 13 Copy Control</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/10/15/csharp/clr-via-csharp/Chapter%205%20Primitive,%20Reference,%20and%20Value%20%20Types/" title="CLR via C# - Chapter 5 Primitive, Reference, and Value Types Fundamentals">CLR via C# - Chapter 5 Primitive, Reference, and Value Types Fundamentals</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/11/17/csharp/clr-via-csharp/Chapter%2015%20Enumerated%20Types%20and%20Bit%20Flags/" title="CLR via C# - Chapter 15 Enumerated Types and Bit Flags">CLR via C# - Chapter 15 Enumerated Types and Bit Flags</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="In Linux">Linux</a> <i class="ic i-angle-right"></i> <a href="/categories/Linux/Learn-Linux/" title="In Learn-Linux">Learn-Linux</a></div><span><a href="/2022/08/28/linux/learn-linux/%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/" title="LearnLinux - è½¯ä»¶åŒ…ç®¡ç†">LearnLinux - è½¯ä»¶åŒ…ç®¡ç†</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Cpp/" title="In Cpp">Cpp</a> <i class="ic i-angle-right"></i> <a href="/categories/Cpp/Cpp-Primer/" title="In Cpp-Primer">Cpp-Primer</a></div><span><a href="/2022/12/16/cpp/cpp-primer/Chapter%208%20The%20IO%20Library/" title="C++ Primer - Chapter 8 The IO Library">C++ Primer - Chapter 8 The IO Library</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Computer-Graphics/" title="In Computer-Graphics">Computer-Graphics</a> <i class="ic i-angle-right"></i> <a href="/categories/Computer-Graphics/GAMES101/" title="In GAMES101">GAMES101</a></div><span><a href="/2022/09/18/computer-graphics/games101/%E5%8F%98%E6%8D%A2/" title="GAMES101 - Transformationï¼ˆå˜æ¢ï¼‰">GAMES101 - Transformationï¼ˆå˜æ¢ï¼‰</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Cpp/" title="In Cpp">Cpp</a> <i class="ic i-angle-right"></i> <a href="/categories/Cpp/Cpp-Primer/" title="In Cpp-Primer">Cpp-Primer</a></div><span><a href="/2022/12/10/cpp/cpp-primer/Chapter%202%20Variables%20and%20Basic%20Types/" title="C++ Primer - Chapter 2 Variables and Basic Types">C++ Primer - Chapter 2 Variables and Basic Types</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CSharp/" title="In CSharp">CSharp</a> <i class="ic i-angle-right"></i> <a href="/categories/CSharp/CLR-via-CSharp/" title="In CLR-via-CSharp">CLR-via-CSharp</a></div><span><a href="/2022/11/29/csharp/clr-via-csharp/Chapter%2023%20Assembly%20Loading%20and%20Reflection/" title="CLR via C# - Chapter 23 Assembly Loading and Reflection">CLR via C# - Chapter 23 Assembly Loading and Reflection</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 â€“ <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Sakupinera @ Hanamai Sora</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">2.2m words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">34:05</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/08/28/csharp/clr-via-csharp/Chapter 2 Building, Packaging, Deploying, and Administering Applications and Types/",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰Goooood",hide:"(Â´Ğ”ï½€)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/assets/shifuku.model.json"},display:{position:"left",width:250,height:500},mobile:{show:!1},react:{opacity:.9},log:!1})</script></body></html>